window.__require=function t(i,e,s){function n(a,h){if(!e[a]){if(!i[a]){var c=a.split("/");if(c=c[c.length-1],!i[c]){var r="function"==typeof __require&&__require;if(!h&&r)return r(c,!0);if(o)return o(c,!0);throw new Error("Cannot find module '"+a+"'")}}var l=e[a]={exports:{}};i[a][0].call(l.exports,function(t){return n(i[a][1][t]||t)},l,l.exports,t,i,e,s)}return e[a].exports}for(var o="function"==typeof __require&&__require,a=0;a<s.length;a++)n(s[a]);return n}({aiperception:[function(t,i,e){"use strict";cc._RF.push(i,"f00b6szxHVNDoGS+2v0JYGj","aiperception");var s=t("basis").basis;cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.parent=this.node.parent,this.node.getComponent(cc.CircleCollider).radius=s.aiPerception,this.initList()},initList:function(){return this.list={zhurenwuList:{},kerenwuList:{},tanweiList:{},jnengList:{},moenyList:{}},this.list},onCollisionEnter:function(t,i){var e=t.node;if(e.name!=this.parent.name&&!(e.invincible>0)){var s=e.name.split("-");if("\u6563"==s[0])this.list.kerenwuList[e._id]=e;else if("\u644a\u4f4d"==s[0])this.list.tanweiList[e._id]=e;else if("\u541e\u566c\u5708"==s[0]){if(0==e.parent.getComponent("renwu").myfollowerList.length)return;this.list.zhurenwuList[e._id]=e.parent}else"\u6280\u80fd"==s[0]?this.list.jnengList[e._id]=e:"\u949e\u7968"==s[0]&&(this.list.moenyList[e._id]=e)}},onCollisionExit:function(t,i){var e=t.node;if(e.name!=this.parent.name&&!(e.invincible>0||this.parent.invincible>0)){var s=e.name.split("-");"\u6563"==s[0]?delete this.list.kerenwuList[e._id]:"\u644a\u4f4d"==s[0]?delete this.list.tanweiList[e._id]:"\u541e\u566c\u5708"==s[0]?delete this.list.zhurenwuList[e._id]:"\u6280\u80fd"==s[0]?delete this.list.jnengList[e._id]:"\u949e\u7968"==s[0]&&delete this.list.moenyList[e._id]}}}),cc._RF.pop()},{basis:"basis"}],basis:[function(t,i,e){"use strict";cc._RF.push(i,"c5f82VKiNhFjIqhJM5GTkAp","basis");var s={version:"1.0.0",openId:"\u6d4b\u8bd5\u73a9\u5bb6"+100*Math.random(),gold:9999,gameNmae:"\u5927\u5f20\u4e09",gameNameList:["1\u53f7","2\u53f7","3\u53f7","4\u53f7","5\u53f7","6\u53f7","7\u53f7","8\u53f7","9\u53f7","10\u53f7","11\u53f7","12\u53f7"],settGold:0,myLevel:2,myExper:20,myHeadPortrait:"",levelName:["\u7b49\u7ea71","\u7b49\u7ea72","\u7b49\u7ea73","\u7b49\u7ea74","\u7b49\u7ea75","\u7b49\u7ea76"],upLevelEx:[10,50,100,500,1e3,1500],prepareTips:["\u62d6\u4f4f\u79fb\u52a8\u53d1\u8d77\u8fdb\u653b","\u62a2\u5360\u7a7a\u644a\u4f4d\u6bd4\u8f83\u5feb","\u4e3b\u52a8\u8fdb\u653b\u62a2\u5360\u644a\u4f4d\uff0c\u4eba\u548c\u7968\u5b50\u90fd\u662f\u4f60\u7684","\u906d\u9047\u653b\u51fb\u4e0d\u8981\u6015\uff0c\u96c6\u7ed3\u5ba2\u4eba\u4e00\u8d77\u5bf9\u6297","\u5347\u7ea7\u8363\u8000\u52cb\u7ae0\uff0c\u66f4\u591a\u795e\u79d8\u5b9d\u7bb1\u7b49\u4f60\u6765\u62ff"],gameAllName:["1\u53f7","2\u53f7","3\u53f7","4\u53f7","5\u53f7","6\u53f7","7\u53f7","8\u53f7","9\u53f7","10\u53f7","11\u53f7","12\u53f7"],gameRankReward:[20,10,5,2,1,1,1,1,1,1,1,1,1,1],boothUnlockLevel:[1,2,3,4],prepareTime:3,figureList:[{id:1,imgName:"001",effect:0,figureWord:"\u65b0\u4ea7\u54c1\uff0c\u521a\u521a\u5230\uff0c\u5168\u56fd\u5404\u5730\u90fd\u77e5\u90531",type:"gold",gold:1e3,hava:!0,use:!0,height:250},{id:2,imgName:"002",effect:.01,figureWord:"\u65b0\u4ea7\u54c1\uff0c\u521a\u521a\u5230\uff0c\u5168\u56fd\u5404\u5730\u90fd\u77e5\u90532",type:"gold",gold:1e3,hava:!0,use:!1,height:250},{id:3,imgName:"003",effect:.02,figureWord:"\u65b0\u4ea7\u54c1\uff0c\u521a\u521a\u5230\uff0c\u5168\u56fd\u5404\u5730\u90fd\u77e5\u90533",type:"gold",gold:1e3,hava:!1,use:!1,height:250},{id:4,imgName:"004",effect:.03,figureWord:"\u65b0\u4ea7\u54c1\uff0c\u521a\u521a\u5230\uff0c\u5168\u56fd\u5404\u5730\u90fd\u77e5\u90534",type:"shar",target:2,complete:1,gold:1e3,hava:!1,use:!1,height:250},{id:5,imgName:"005",effect:.04,figureWord:"\u65b0\u4ea7\u54c1\uff0c\u521a\u521a\u5230\uff0c\u5168\u56fd\u5404\u5730\u90fd\u77e5\u90535",type:"gold",gold:1e3,hava:!1,use:!1,height:250}],myfigureIndex:0,myfigure:{id:1,imgName:"009",effect:.02,figureWord:"\u65b0\u4ea7\u54c1\uff0c\u521a\u521a\u5230\uff0c\u5168\u56fd\u5404\u5730\u90fd\u77e5\u9053123",type:"gold",gold:1e3,hava:!0,use:!0,height:200},movespeed:5,moveSpeedLevelAttenu:0,devourRadius:110,booth1:24,booth2:6,booth3:3,booth4:1,booth1OccupySpeed:[1,2],booth2OccupySpeed:[1,2],booth3OccupySpeed:[1,2],booth4OccupySpeed:[1,2],booth1GuestProvideSpeed:1,booth2GuestProvideSpeed:1,booth3GuestProvideSpeed:1,booth4GuestProvideSpeed:1,boothLevel1Glod:1,boothLevel2Glod:2,boothLevel3Glod:3,boothLevel4Glod:4,boothGolidTimeIniter:3,mapWidth:2160,mapHeight:2600,initGuestNum:30,newGuestTime:1,initSkils1Num:3,newSkils1Time:3,initSkils2Num:3,newSkils2Time:3,initSkils3Num:3,newSkils3Time:3,skils1Effect:2,skils2Effect:2,skils3Effect:2,skils1Time:1,skils2Time:1,skils3Time:10,basedBubble:["11111111111","22222222222","3333333333"],combatBubble:["44444444444","55555555555","6666666666"],generateBubbleTime:10,gameTime:14,summonDistance:1e3,summonSpeed:2,aiNum:5,aiPerception:220,aiLevelIncreaseScope:20,aiResurgencePor:1,aiInitFigure:0,aiResurrCooling:2,aiSkil1Porbability:.8,aiSkil2Porbability:.8,aiSkil3Porbability:1,aiSkilBuiltTime:1,devourLimit:0,devourSpeed:1,invincibleTime:5,championAward:5e3,beatEachDropMoney:100,beatEachDropRate:.5,gameStartInvTime:3,myGameStartInvin:!0,observerPattern:!1,openMusic:!0,openvibration:!0};i.exports={basis:s},cc._RF.pop()},{}],booth:[function(t,i,e){"use strict";cc._RF.push(i,"740f519nUxFFrGcW3fz5JLZ","booth");var s=t("./map.js"),n=t("./interact.js"),o=t("./game.js"),a=t("../currency/music.js"),h=t("weixin_ty").wxcur,c=t("basis").basis;cc.Class({extends:cc.Component,properties:{showImg:cc.Sprite,jindu:cc.Label,baitandonghu:cc.Node},onLoad:function(){this.zhanlingzhenode="",this.boothFollower=[],this.node.yidongfig=!0,this.zhanjindut=0,this.e=0,this.zhengdFilg=!1,this.zhanling=!1},start:function(){this.minBooth=this.getMinBooth(),this.baitandonghu.scale=this.node.width/80*.2},onCollisionEnter:function(t,i){if("\u5360\u9886\u5708"==t.node.group){var e=t.node.parent;e.yidongfig||("\u6211"==e.name&&"\u6211"!=this.zhanlingzhenode.name?n.interact._this.zhanyzs.stopAllActions():"\u6211"!=e.name&&this.zhanlingzhenode.name!=e.name&&this.zhanlingzhenode&&(console.log(this.zhanlingzhenode.name,e.name),this.zhanlingzhenode.getComponent("renwu").beAttackBooth=e))}},onCollisionStay:function(t,i){if("\u5360\u9886\u5708"==t.node.group){var e=t.node.parent,s=e.getComponent("renwu");if(this.zlznodeCom=s,("\u6211"!=e.name||!c.observerPattern)&&("\u6211"==e.name||s&&"\u644a\u4f4d"==s.mubiao))if("\u6211"==e.name&&"\u6211"!=this.zhanlingzhenode.name)this.zhanling=!0,this.zhengdFilg=!0,n.interact._this.zhanyzs.active=!0,n.interact._this.zhanyjdt.width=this.zhanjindut/100*n.interact._this.zhanyzs.width,this.zhanjindut>=100&&(console.log("\u5360\u9886\u6210\u529f"),this.zhanlingzhenode&&(this.zhanlingzhenode.getComponent("renwu").occBooth["people"+this.level]-=this.boothFollower.length,this.zhanlingzhenode.getComponent("renwu").deleteMyBooth(this.node)),this.zhanjindut=0,this.zhanlingzhenode=e,n.interact._this.zhanywz.string="\u5360\u9886\u6210\u529f",n.interact._this.zhanywz.node.color=new cc.Color(176,134,35,255),n.interact._this.zhanywz.fontSize=30,s.occBoothNum+=1,n.interact._this.updaHaveBooth(s.occBoothNum),n.interact._this.zhanyzs.runAction(cc.sequence(cc.fadeOut(.5),cc.callFunc(function(){n.interact._this.zhanywz.node.color=new cc.Color(255,255,255,255),n.interact._this.zhanywz.fontSize=24,n.interact._this.zhanyzs.opacity=255,n.interact._this.zhanyzs.active=!1,n.interact._this.zhanywz.string="\u5360\u9886\u644a\u4f4d\u4e2d"}))),this.occuSuccess(e));else if("\u6211"!=e.name&&this.zhanlingzhenode.name!=e.name){if(0==s.myfollowerList.length)return;this.zhanling=!0,this.jindu.string=this.zhanjindut+"%",s.resfyd=!1,"\u6211"!=this.zhanlingzhenode.name||this.wobz||(this.minBooth.color=new cc.Color(255,0,0),this.minBooth.children[0].active=!0,this.wobz=!0,a.music._this.openMusic("","jinggaosheng")),this.zhanjindut>=100&&(this.zhanlingzhenode&&(this.zhanlingzhenode.getComponent("renwu").occBooth["people"+this.level]-=this.boothFollower.length,this.zhanlingzhenode.getComponent("renwu").deleteMyBooth(this.node)),this.minBooth.children[0].active=!1,this.wobz=!1,this.zhanlingzhenode=e,this.zhanjindut=0,this.occuSuccess(e))}}},onCollisionExit:function(t,i){if("\u5360\u9886\u5708"==t.node.group){var e=t.node.parent;"\u6211"==e.name?(n.interact._this.zhanyzs.active=!1,n.interact._this.zhanyjdt.width=0):(e.getComponent("renwu").resfyd=!0,this.zhanlingzhenode&&("\u6211"==this.zhanlingzhenode.name?this.minBooth.color=new cc.Color(88,124,69,255):this.minBooth.color=this.zhanlingzhenode.minMapLocColor),this.minBooth.children[0].active=!1),this.zhengdFilg=!1,this.zhanling=!1,this.e=0,this.showImg.node.x=this.initX,this.showImg.node.y=this.initY,this.zhanjindut=0,this.wobz=!1}},occuSuccess:function(t){var i=this,e=t.getComponent("renwu"),s=e.myfollowerList,n=s.length-1,o=0,a=1==this.level?4:2==this.level?6:3==this.level?10:16;a>s.length+this.boothFollower.length&&(a=s.length+this.boothFollower.length),e.occBooth["people"+this.level]+=this.boothFollower.length;for(var r=0;r<a;r++)if(r<this.boothFollower.length)this.boothFollower[r].getComponent("follower").tx.armatureName=e.imgName,this.boothFollower[r].getComponent("follower").tx.playAnimation("\u884c\u8d70");else{var l=n-o,u=s[l].getComponent("follower");e.occBooth["people"+this.level]+=1,e.kerenwuList[s[l].tagIndex]=!1,this.boothFollower.push(u),u.init(r+1,100,this.node),s.splice(l,1),o++}"\u6211"!=t.name?(e.resfyd=!0,e.romTarget(),this.baitandonghu.active=!1):(h.is_WECHAT_GAME()&&c.openvibration&&wx.vibrateLong(),this.node.runAction(cc.sequence(cc.scaleTo(.15,1.2),cc.scaleTo(.3,.8),cc.scaleTo(.15,1),cc.callFunc(function(){0!=i.boothFollower.length&&(i.baitandonghu.active=!0)})))),this.addMinBooth(t),this.zhengdFilg=!1,this.zhanling=!1,this.e=0,this.showImg.node.x=this.initX,this.showImg.node.y=this.initY,e.getMyBooth(this.node),e.countLayer(s.length,1),e.updeSpeed()},addMinBooth:function(t){"\u6211"==t.name?(this.minBooth.color=new cc.Color(176,134,35,255),this.showImg.spriteFrame=n.interact._this.gameImgList.getSpriteFrame("\u644a\u4f4d"+this.level+"_00"+this.boothLevel)):(this.minBooth.color=t.minMapLocColor,this.showImg.spriteFrame=n.interact._this.gameImgList.getSpriteFrame("\u644a\u4f4d"+this.level+"_00"+this.boothLevel+"_02"))},deleteMinBooth:function(){this.minBooth.color=new cc.Color(139,137,127),this.showImg.spriteFrame=n.interact._this.gameImgList.getSpriteFrame("\u644a\u4f4d"+this.level+"_00"+this.boothLevel+"_02")},getMinBooth:function(){var t=this;return s.map._this.minMap.children.find(function(i){return i.mapY==t.mapY&&i.mapX==t.mapX})},init:function(t,i,e){var s=this.node,o=s.getComponent(cc.BoxCollider),a=1;switch(a=c.myLevel>c.boothUnlockLevel[c.boothUnlockLevel.length-1]?4:c.boothUnlockLevel.findIndex(function(t){return t>c.myLevel}),this.boothLevel=Math.ceil(Math.random()*a),this.showImg.spriteFrame=n.interact._this.gameImgList.getSpriteFrame("\u644a\u4f4d"+t+"_00"+this.boothLevel+"_02"),this.level=t,this.mapX=i,this.mapY=e,t){case 1:s.x=80*(i-1)-1080,s.y=1280-80*(e-1);break;case 2:s.x=80*(i-2)-1040,s.y=1280-80*(e-1),s.width=160;break;case 3:s.x=80*(i-3)-1e3,s.y=1240-80*(e-2),s.width=240,s.height=160;break;case 4:s.x=80*(i-4)-960,s.y=1160-80*(e-4),s.width=320,s.height=320}this.initX=this.showImg.node.x,this.initY=this.showImg.node.y,o.size.width=s.width,o.size.height=s.height},yingcang:function(){var t=cc.view.getFrameSize(),i=o.game._this.camera.convertToNodeSpaceAR(cc.v2(this.node.x,this.node.y));i.x+=t.width,i.y+=t.height,i.x>t.width+this.node.width/2||i.x<-t.width-this.node.width/2||i.y<-t.height-this.node.height/2||i.y>t.height+this.node.height/2?this.node.opacity=0:this.node.opacity=255},update:function(t){if(this.yingcang(),this.zhengdFilg&&(this.e+=t,this.showImg.node.x<this.initX?this.showImg.node.x+=5*Math.random():this.showImg.node.x-=5*Math.random(),this.showImg.node.y<this.initY?this.showImg.node.y+=5*Math.random():this.showImg.node.y-=5*Math.random()),this.zhanling){var i=c["booth"+this.level+"OccupySpeed"][1]-c["booth"+this.level+"GuestProvideSpeed"]*(this.zlznodeCom.myfollowerList.length-this.boothFollower.length);i<c["booth"+this.level+"OccupySpeed"][0]&&(i=c["booth"+this.level+"OccupySpeed"][0]),this.zhanjindut+=t/i*100}}}),cc._RF.pop()},{"../currency/music.js":"music","./game.js":"game","./interact.js":"interact","./map.js":"map",basis:"basis",weixin_ty:"weixin_ty"}],devourcircle:[function(t,i,e){"use strict";cc._RF.push(i,"58f85xqJVdE64m1uPUBvmE8","devourcircle");var s=t("basis").basis;cc.Class({extends:cc.Component,properties:{},onLoad:function(){},start:function(){this.parent=this.node.parent,this.parentCom=this.parent.getComponent("renwu")},onCollisionStay:function(t,i){var e=t.node,n=e.parent.getComponent("renwu");"ai\u611f\u77e5\u5708"!=e.group&&(this.parentCom.myfollowerList.length/n.myfollowerList.length-1<=s.devourLimit||(0==n.myfollowerList?n.aiPerList&&delete n.aiPerList.zhurenwuList[e.parent._id]:n.beDevours(this.parent)))}}),cc._RF.pop()},{basis:"basis"}],exsettlement:[function(t,i,e){"use strict";cc._RF.push(i,"4f6c3rCcfFPkLm3+UkbkYss","exsettlement");t("./game.js");var s=t("./interact.js"),n=(t("./../currency/music.js"),t("basis").basis),o=(t("weixin_ty").wxcur,cc.Class({extends:cc.Component,properties:{duanweimz:cc.Sprite,jdt:cc.ProgressBar,jangbs:cc.Label,guangquan:cc.Node,xunzhangAli:cc.SpriteAtlas},onLoad:function(){o._this=this,this.guangquan.runAction(cc.repeatForever(cc.rotateBy(5,360))),this.updateInt()},updateInt:function(){this.duanweimz.spriteFrame=this.xunzhangAli.getSpriteFrame("\u52cb\u7ae0\u7b49\u7ea7"+n.myLevel),this.jdt.progress=n.myExper/n.upLevelEx[n.myLevel-1],this.jangbs.string=n.myExper+"/"+n.upLevelEx[n.myLevel-1]},init:function(t){var i=this;setTimeout(function(){i.gdjbs=t,i.gdjbs2=t},1e3)},update:function(t){if(this.gdjbs>0){var i=Math.ceil(t*this.gdjbs2);i>this.gdjbs&&(i=this.gdjbs),this.gdjbs-=i,n.myExper+=i,n.myExper>=n.upLevelEx[n.myLevel-1]&&(n.myLevel+=1),0==this.gdjbs&&setTimeout(function(){s.interact._this.gotoIndex()},1e3),this.updateInt()}}}));e.exsettlement=o,cc._RF.pop()},{"./../currency/music.js":"music","./game.js":"game","./interact.js":"interact",basis:"basis",weixin_ty:"weixin_ty"}],followerlist:[function(t,i,e){"use strict";cc._RF.push(i,"3f273+KMRNA3qxfXI9CKdOn","followerlist");t("./game.js");var s=t("weixin_ty").wxcur,n=(t("basis").basis,cc.Class({extends:cc.Component,properties:{followerlist:cc.Node,follower:cc.Prefab},onLoad:function(){n._this=this,this.followerPool=s.setNodeBool(50,this.follower)},update:function(t){}}));e.followerlist=n,cc._RF.pop()},{"./game.js":"game",basis:"basis",weixin_ty:"weixin_ty"}],follower:[function(t,i,e){"use strict";cc._RF.push(i,"a6fd9i3LIJJKqejKqQIDyRV","follower");var s=t("./game.js"),n=t("./map.js"),o=t("./interact.js"),a=(t("../currency/music.js"),t("weixin_ty").wxcur),h=t("basis").basis;cc.Class({extends:cc.Component,properties:{tx:dragonBones.ArmatureDisplay,jia1:cc.Node},onLoad:function(){this.diffX=0,this.diffY=0,this.summonSpeed=1,this.tx.node.scaleX=Math.random()-.5>0?.3:-.3,this.tx.armatureName="npc00"+Math.ceil(5*Math.random())},init:function(t,i,e){var s=this,o=1,c=8;if(this.parent=e,this.node.group="\u8ddf\u968f\u5ba2\u4eba\u7269",this.node.name="\u8ddf-\u5ba2\u4eba\u7269-"+this.node._id,"\u644a\u4f4d"==e.group)return this.tx.playAnimation("\u5f85\u673a"),void this.yidtw(t);"\u6211"==e.name&&a.is_WECHAT_GAME()&&h.openvibration&&wx.vibrateShort(),this.jia1.active=!0,this.jia1.opacity=255,this.jia1.runAction(cc.sequence(cc.spawn(cc.moveBy(.5,cc.v2(0,20)),cc.fadeOut(.5)),cc.callFunc(function(){s.jia1.active=!1})));var r=e.getComponent("renwu");this.theOwnerName=e.name,this.node.initChar||(n.map._this.map[this.node.mapY][this.node.mapX]=0),this.tx.armatureName=r.imgName,this.tx.playAnimation("\u884c\u8d70"),this.node.tagIndex=t,c=Math.floor(360/Math.floor(180/(Math.PI/Math.tan(.625)))),t+=1,function i(e){var s=Math.floor(360/Math.floor(180/(Math.PI/Math.tan(75/(80*(o+.5))))));c=s;t>s&&(t-=s,o+=1,i(e))}(c),this.angle=Math.floor(360/c)*t+20,this.layer=o,r.follLevel=o,r.updeSpeed(),this.initcoordX=Math.sin(2*this.angle*Math.PI/360)*(80*(o+.5)),this.initcoordY=Math.cos(2*this.angle*Math.PI/360)*(80*(o+.5)),this.targetX=this.initcoordX,this.targetY=this.initcoordY},devourFigure:function(t){var i=this;console.log(123);var e=t.getComponent("renwu");e.death||(e.death=!0,t.runAction(cc.sequence(cc.spawn(cc.moveTo(.5,cc.v2(this.parent.x,this.parent.y)),cc.scaleTo(.5,0)),cc.callFunc(function(){t.scale=1,t.active=!1,e.lossMonery=e.gold,n.map._this.addMoney(t.x,t.y,Math.floor(e.gold*h.beatEachDropRate)),e.updeGold(e.gold-Math.floor(e.gold*h.beatEachDropRate)),o.interact._this.openJstishi(i.parent.gameName+"\u541e\u5e76\u4e86"+t.gameName),"\u6211"==t.name?o.interact._this.popup("","pochanPopup"):(e.resurrection(),setTimeout(function(){delete e.aiPerList.zhurenwuList[t._id]},0))}))))},yidtw:function(t){var i=this.parent.getComponent("booth"),e=(this.parent.width/80+1)/2,s=(this.parent.height/80+1)/2;switch(i.level){case 4:11==t&&(this.initcoordX=0-80*e,this.initcoordY=0-s%Math.floor(s)*80),12==t&&(this.initcoordX=0+e%Math.floor(e)*80,this.initcoordY=0+80*s),13==t&&(this.initcoordX=0+80*e,this.initcoordY=0-s%Math.floor(s)*80),14==t&&(this.initcoordX=0+e%Math.floor(e)*80,this.initcoordY=0-80*s),15==t&&(this.initcoordX=0-80*e,this.initcoordY=0+(s-1)%2*80),16==t&&(this.initcoordX=0+80*e,this.initcoordY=0+(s-1)%2*80);case 3:7==t&&(this.initcoordX=0-80*e,this.initcoordY=0-(s-1)%2*80),8==t&&(this.initcoordX=0-80*(e-1),this.initcoordY=0+80*s),9==t&&(this.initcoordX=0+80*e,this.initcoordY=0-(s-1)%2*80),10==t&&(this.initcoordX=0-80*(e-1),this.initcoordY=0-80*s);case 2:5==t&&(this.initcoordX=0+80*(e-1),this.initcoordY=0+80*s),6==t&&(this.initcoordX=0+80*(e-1),this.initcoordY=0-80*s);case 1:1==t&&(this.initcoordX=0-80*e,this.initcoordY=0+s%Math.floor(s)*80),2==t&&(this.initcoordX=0-e%Math.floor(e)*80,this.initcoordY=0+80*s),3==t&&(this.initcoordX=0+80*e,this.initcoordY=0+s%Math.floor(s)*80),4==t&&(this.initcoordX=0-e%Math.floor(e)*80,this.initcoordY=0-80*s)}this.targetX=this.initcoordX,this.targetY=this.initcoordY,this.angle=this.initAngle=-a.getAngle(this.targetX,this.targetY,0,0)},yidong:function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var i=Math.pow(Math.pow(this.initcoordX,2)+Math.pow(this.initcoordY,2),.5);this.targetX=t.x+Math.sin(2*this.angle*Math.PI/360)*i,this.targetY=t.y+Math.cos(2*this.angle*Math.PI/360)*i,this.diffX=this.targetX-this.node.x,this.diffY=this.targetY-this.node.y},yingcang:function(){var t=cc.view.getFrameSize(),i=s.game._this.camera.convertToNodeSpaceAR(cc.v2(this.node.x,this.node.y));i.x+=t.width,i.y+=t.height,i.x>t.width||i.x<-t.width||i.y<-t.height||i.y>t.height?this.node.opacity=0:this.node.opacity=255},update:function(t){if(this.parent)if(this.parent.yidongfig&&this.yidong(this.parent),this.yingcang(),0!=this.diffX||0!=this.diffY){var i=(0).x,e=(0).y;if(this.targetAngle=a.getAngle(this.node.x,this.node.y,this.targetX,this.targetY),"\u4e3b\u4eba\u7269"==this.parent.group){var s=this.parent.getComponent("renwu");this.tx.node.scaleX=s.tx.node.scaleX/Math.abs(s.tx.node.scaleX)*.2}else"\u644a\u4f4d"==this.parent.group&&(this.node.x>this.parent.x?this.tx.node.scaleX=-.2:this.tx.node.scaleX=.2);if("\u644a\u4f4d"==this.parent.group)e=Math.cos(2*this.targetAngle*Math.PI/360)*h.movespeed*1.5*this.summonSpeed,i=Math.sin(2*this.targetAngle*Math.PI/360)*h.movespeed*1.5*this.summonSpeed;else{var n=this.parent.getComponent("renwu");e=Math.cos(2*this.targetAngle*Math.PI/360)*h.movespeed*1.5*this.summonSpeed*n.baseMovingSpeed,i=Math.sin(2*this.targetAngle*Math.PI/360)*h.movespeed*1.5*this.summonSpeed*n.baseMovingSpeed}this.diffX>=0&&this.diffX-i<=0||this.diffX<=0&&this.diffX-i>=0?(this.node.x+=this.diffX,this.diffX=0):(this.node.x+=i,this.diffX-=i),this.diffY>=0&&this.diffY-e<=0||this.diffY<=0&&this.diffY-e>=0?(this.node.y+=this.diffY,this.diffY=0):(this.node.y+=e,this.diffY-=e),(this.node.x+i>h.mapWidth/2||this.node.x+i<-h.mapWidth/2)&&(this.node.x=i>0?h.mapWidth/2:-h.mapWidth/2),(this.node.y+e>h.mapHeight/2||this.node.y+e<-h.mapHeight/2)&&(this.node.y=e>0?h.mapHeight/2:-h.mapHeight/2)}else this.summonSpeed=1}}),cc._RF.pop()},{"../currency/music.js":"music","./game.js":"game","./interact.js":"interact","./map.js":"map",basis:"basis",weixin_ty:"weixin_ty"}],gameRank:[function(t,i,e){"use strict";cc._RF.push(i,"9cf31vXuDtNwJV5cYwAH+gO","gameRank");t("./game.js");var s=t("./interact.js"),n=t("basis").basis;cc.Class({extends:cc.Component,properties:{tx:cc.Sprite,mingzi:cc.Label,jinbi:cc.Label,mingci:cc.Label,jiangbei:cc.Label,mingci1:cc.Node,mingci2:cc.Node,mingci3:cc.Node},init:function(t){this.mingci.string=t+1,0==t?this.mingci1.active=!0:1==t?this.mingci2.active=!0:2==t?this.mingci3.active=!0:this.mingci.node.active=!0,this.jiangbei.string=n.gameRankReward[t],this.mingzi.string=s.interact._this.goldRnak[t].gameName,this.jinbi.string=Math.round(s.interact._this.goldRnak[t].gold),s.interact._this.goldRnak[t].gameName==n.gameNmae&&(this.node.getComponent(cc.Sprite).spriteFrame=s.interact._this.gameImgList.getSpriteFrame("\u81ea\u5df1di"))}}),cc._RF.pop()},{"./game.js":"game","./interact.js":"interact",basis:"basis"}],game:[function(t,i,e){"use strict";cc._RF.push(i,"71594oT51RBKbgnhq570hLb","game");t("./followerlist.js");var s=t("./interact.js"),n=t("./../currency/music.js"),o=t("weixin_ty").wxcur,a=t("basis").basis,h=cc.Class({extends:cc.Component,properties:{dianchumb:cc.Node,caozuodi:cc.Node,caozuoopan:cc.Node,renwu:cc.Node,camera:cc.Node},onLoad:function(){h._this=this,this.gameStart=!0,this.renwu.zIndex=999999,this.renwu=this.renwu.getComponent("renwu"),cc.director.getCollisionManager().enabled=!0,this.dianchumb.on(cc.Node.EventType.TOUCH_START,this.touchStart,this),this.dianchumb.on(cc.Node.EventType.TOUCH_MOVE,this.touchMove,this),this.dianchumb.on(cc.Node.EventType.TOUCH_END,this.touchEnd,this),this.renwu.zIndex=2;var t=["001","002","003","004","005","006","007","008","009","010","011","012"];t.splice(t.findIndex(function(t){return t==a.myfigure.imgName}),1),this.aiRomImg=this.randomArr(t,a.aiNum),console.log(this.aiRomImg),this.getCanvMoreHeight()},randomArr:function(t,i){for(var e=[],s=0;s<i;s++){var n=Math.floor(Math.random()*t.length);e.push(t[n]),t.splice(n,1)}return e},start:function(){this.bgm=n.music._this.openMusic("","bgm2",!0)},getCanvMoreHeight:function(){var t=cc.view.getFrameSize();this.height=667*t.width/375-t.height>0?0:667*t.width/375-t.height,this.width=t.width},touchStart:function(t){this.renwu.death||(this.yidongfig=!0,this.touchStart=t.getLocation(),this.caozuodi.stopAllActions(),this.caozuodi.opacity=255,this.caozuodi.y=this.touchStart.y-667+this.height,this.caozuodi.x=this.touchStart.x-375)},touchMove:function(t){if(!this.renwu.death){var i=t.getDelta(),e=(this.angle=o.getAngle(0,0,this.caozuoopan.x+i.x,this.caozuoopan.y+i.y))*Math.PI/180;Math.pow(Math.pow(this.caozuoopan.x+i.x,2)+Math.pow(this.caozuoopan.y+i.y,2),.5)>=Math.pow(Math.pow(95.5*Math.sin(e),2)+Math.pow(93*Math.cos(e),2),.5)?(this.caozuoopan.x=95.5*Math.sin(e),this.caozuoopan.y=93*Math.cos(e)):(this.caozuoopan.x+=i.x,this.caozuoopan.y+=i.y)}},touchEnd:function(t){this.yidongfig=!1,this.caozuoopan.y=0,this.caozuoopan.x=0,this.caozuodi.runAction(cc.fadeOut(.5))},ydshijiao:function(){this.camera.x=this.renwu.node.x,this.camera.y=this.renwu.node.y,this.yidongfig?(s.interact._this.gaoguang.x=this.renwu.node.x,s.interact._this.gaoguang.y=this.renwu.node.y,this.renwu.yidong(this.angle)):this.renwu.node.yidongfig=!1},update:function(){this.ydshijiao()}});e.game=h,cc._RF.pop()},{"./../currency/music.js":"music","./followerlist.js":"followerlist","./interact.js":"interact",basis:"basis",weixin_ty:"weixin_ty"}],index:[function(t,i,e){"use strict";cc._RF.push(i,"a5f1d9xXEhDDKi/WhpVRe1i","index");var s=t("./../currency/music.js"),n=t("weixin_ty").wxcur,o=t("basis").basis,a=cc.Class({extends:cc.Component,properties:{glod:cc.Label,glod2:cc.Label,gameName:cc.Label,getGoldPopup:cc.Node,changeSkinPopup:cc.Node,goldNotEnoughPopup:cc.Node,setUpPopup:cc.Node,preparePopup:cc.Node,wudi:cc.Label,touming:cc.Label,setUpMusic:cc.Node,setUpVibration:cc.Node,myLevel:cc.Label,experience:cc.Label,zbjd:cc.Label,zbrenwu:cc.Node,zbtips:cc.Label,qiandh:cc.Node,baitanbut:cc.Node,leveljinud:cc.Node,indexImg:cc.SpriteAtlas,xuanzhongjues:dragonBones.ArmatureDisplay},onLoad:function(){a._this=this,o.myfigure=o.figureList[o.myfigureIndex],this.setGold(),this.bgm=null,this.initLevel(),""==o.gameNmae&&this.romGameName(),this.wudi.string=o.myGameStartInvin?"\u5173\u95ed\u65e0\u654c":"\u5f00\u542f\u65e0\u654c",this.touming.string=o.observerPattern?"\u5173\u95ed\u900f\u660e":"\u5f00\u542f\u900f\u660e",this.zbtips.string=o.prepareTips[Math.floor(Math.random()*o.prepareTips.length)],this.setrenwu()},start:function(){this.baitanbut.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.5,1),cc.scaleTo(.5,.9)))),this.setUpImg(),o.settGold>0&&this.qiandhfun(),o.openMusic&&(this.bgm=s.music._this.openMusic("","bgm1",!0))},setrenwu:function(){this.xuanzhongjues.armatureName=o.myfigure.imgName,this.xuanzhongjues.playAnimation("\u9996\u9875")},qiandhfun:function(){var t=this;this.qiandh.active=!0;var i=o.settGold;this.glod.string=o.gold-i;for(var e=function(e){t.qiandh.children[e].runAction(cc.sequence(cc.moveTo(.5,cc.v2(100*(Math.random()-.5),100*(Math.random()-.5))),cc.callFunc(function(){t.sss||(t.sss=s.music._this.openMusic("","chaosss"))}),cc.moveBy(.1*e,cc.v2(0,0)),cc.moveTo(.3,cc.v2(-320.822998,617.6790161)),cc.callFunc(function(){t.glod.string=o.gold-Math.floor(i/t.qiandh.children.length*(t.qiandh.children.length-1-e))}),cc.spawn(cc.scaleTo(.2,2),cc.fadeOut(.5))))},n=0;n<this.qiandh.children.length;n++)e(n)},startGame:function(t){var i=this,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n={tx:"",name:""};if(n.name=0==e?o.gameNmae:o.gameNameList[Math.floor(Math.random()*o.gameNameList.length)],o.gameAllName.push(n.name),this.zbjd.string=e+1+"/"+(Number(o.aiNum)+1),this.zbrenwu.children[e].children[1].active=!0,this.zbrenwu.children[e].children[1].getComponent(cc.Label).string=n.name,e==o.aiNum)return s.music._this.stopMusic(this.bgm),void this.gotoGame();setTimeout(function(){i.startGame("",e+1)},o.prepareTime*(2e3*Math.random())/10)},initLevel:function(){o.myExper-o.upLevelEx[o.myLevel-2]&&o.upLevelEx[o.myLevel-2];console.log(o.levelName,o.myLevel),this.myLevel.string=o.levelName[o.myLevel-1],this.experience.string="("+o.myExper+"/"+o.upLevelEx[o.myLevel-1]+")",this.leveljinud.width=o.myExper/o.upLevelEx[o.myLevel-1]*220},qiehuanwudi:function(){o.myGameStartInvin=!o.myGameStartInvin,o.myGameStartInvin?this.wudi.string="\u5173\u95ed\u65e0\u654c":this.wudi.string="\u5f00\u542f\u65e0\u654c"},qiehuantoum:function(){o.observerPattern=!o.observerPattern,o.observerPattern?(this.touming.string="\u5173\u95ed\u900f\u660e",o.myGameStartInvin||this.qiehuanwudi()):this.touming.string="\u5f00\u542f\u900f\u660e"},qiehuanMusic:function(){o.openMusic=!o.openMusic,this.setUpImg(),o.openMusic?this.bgm=s.music._this.openMusic("","bgm1",!0):s.music._this.stopMusic(this.bgm),n.is_WECHAT_GAME()&&wx.setStorageSync("openMusic",o.openMusic)},setUpImg:function(){o.openMusic?this.setUpMusic.getComponent(cc.Sprite).spriteFrame=this.indexImg.getSpriteFrame("\u8bbe\u7f6e\u5173\u95ed"):this.setUpMusic.getComponent(cc.Sprite).spriteFrame=this.indexImg.getSpriteFrame("\u5f00\u542f"),o.openvibration?this.setUpVibration.getComponent(cc.Sprite).spriteFrame=this.indexImg.getSpriteFrame("\u8bbe\u7f6e\u5173\u95ed"):this.setUpVibration.getComponent(cc.Sprite).spriteFrame=this.indexImg.getSpriteFrame("\u5f00\u542f")},qiehuanVibration:function(){o.openvibration=!o.openvibration,this.setUpImg(),n.is_WECHAT_GAME()&&wx.setStorageSync("openvibration",o.openvibration)},setGold:function(){this.glod.string=o.gold,this.glod2.string=o.gold},romGameName:function(){this.gameName.string=o.gameNameList[Math.floor(o.gameNameList.length*Math.random())],o.gameNmae=this.gameName.string},gotoGame:function(){cc.director.loadScene("game")},shar:function(){console.log(),n.share()},popup:function(t,i){n.popup(this[""+i])},popupNoBg:function(t,i){n.popup(this[""+i],!1)}});e.index=a,cc._RF.pop()},{"./../currency/music.js":"music",basis:"basis",weixin_ty:"weixin_ty"}],interact:[function(t,i,e){"use strict";cc._RF.push(i,"96d05jNc+FHgoqJ3y+7x92D","interact");var s=t("./game.js"),n=t("./settlement.js"),o=t("./../currency/music.js"),a=t("./exsettlement.js"),h=t("basis").basis,c=t("weixin_ty").wxcur,r=cc.Class({extends:cc.Component,properties:{yingy:cc.Node,dianchu:cc.Node,zhanyzs:cc.Node,zhaohzs:cc.Node,jiasuzs:cc.Node,lankezs:cc.Node,shouyizs:cc.Node,jssj:cc.Label,lksj:cc.Label,sysl:cc.Label,zhanyjdt:cc.Node,zhanywz:cc.Label,btbaiping:cc.Label,yonytanwei:cc.Label,wodejinbi:cc.Label,wodejinbi2:cc.Label,wodemingzi:cc.Label,youxiphmz:cc.Node,youxiphjinbi:cc.Node,youxishijian:cc.Label,wdxiaodituw:cc.Node,gaoguang:cc.Node,skill1:cc.Node,skill2:cc.Node,tbrwname:cc.Label,pochanPopup:cc.Node,jiesuanPopup:cc.Node,exjiesuanPopup:cc.Node,jieshuPopup:cc.Node,gameImgList:cc.SpriteAtlas,zhongctishi:cc.Label,jishatishi:cc.Label},onLoad:function(){r._this=this,s.game._this.renwu.getComponent("renwu").xiaodituw=this.wdxiaodituw,this.yingy.height-=2*s.game._this.height,this.dianchu.height-=2*s.game._this.height,this.gameTime=h.gameTime,this.e=0,this.gold=0,this.sygold=0,this.mcjdgold=0,this.goldRnak=[],this.zhongchang=!1,this.jssj.string="\u6301\u7eed"+h.skils3Time+"\u79d2",this.lksj.string="\u6301\u7eed"+h.skils1Time+"\u79d2",this.sysl.string="\u6301\u7eed"+h.skils2Time+"\u79d2",this.wodemingzi.string=h.gameNmae},setGold:function(t){t-this.gold>0&&o.music._this.openMusic("","chaopaosztd"),this.sygold+=t-this.gold,this.mcjdgold+=t-this.gold},popup:function(t,i){c.popup(this[""+i])},popupNoBg:function(t,i){c.popup(this[""+i],!1)},updaHaveBooth:function(t){this.yonytanwei.string="\u6211\u7684\u644a\u4f4d:"+t},openExset:function(){this.popup("","exjiesuanPopup"),a.exsettlement._this.init(h.gameRankReward[s.game._this.renwu.rnak])},openJstishi:function(t){this.jishatishi.string=t,this.jishatishi.node.active=!0,this.jishatishi.node.opacity=0,this.jishatishi.node.stopAllActions(),this.jishatishi.node.runAction(cc.sequence(cc.fadeIn(.2),cc.fadeIn(1),cc.fadeOut(.2)))},updeGameTime:function(t){this.gameTime<=0||!s.game._this.gameStart||(this.gameTime-=t,this.gameTime<=0&&(this.gameTime=0),this.youxishijian.string=Math.ceil(this.gameTime)+"s",this.gameTime<h.gameTime/2&&!this.zhongchang&&(this.zhongchang=!0,this.zhongcdh()),this.gameTime<=5&&(this.zhongctishi.node.active=!0,this.zuihdjs||(console.log(123),this.zhongctishi.node.runAction(cc.repeatForever(cc.sequence(cc.fadeIn(0),cc.scaleTo(0,1.5),cc.moveBy(0,cc.v2(0,34)),cc.spawn(cc.scaleTo(.3,1),cc.moveBy(0,cc.v2(0,-34))),cc.fadeOut(.3),cc.scaleTo(.4,1)))),this.zuihdjs=!0),this.zhongctishi.string=""+Math.ceil(this.gameTime),this.zhongctishi.fontSize=100,this.gameTime<=3&&(this.zhongctishi.node.color=new cc.Color(118,46,44,255))),this.gameTime<=0&&(console.log("\u6e38\u620f\u7ed3\u675f"),this.zhongctishi.node.active=!1,this.popupGameOver()))},zhongcdh:function(){var t=this;this.zhongctishi.node.active=!0,this.zhongctishi.node.x=750,this.zhongctishi.node.runAction(cc.moveTo(.5,cc.v2(0,300))),setTimeout(function(){t.zhongctishi.node.active=!1},2e3)},popupGameOver:function(){var t=this;this.pochanPopup.active&&this.popup("","pochanPopup"),s.game._this.gameStart=!1,this.popup("","jieshuPopup"),setTimeout(function(){t.popup("","jieshuPopup"),t.popup("","jiesuanPopup"),o.music._this.openMusic("","jiesuanjl"),n.settlement._this.init({money:t.gold,ranking:t.rnak})},1500)},gotoIndex:function(){o.music._this.stopMusic(s.game._this.bgm),cc.director.loadScene("index")},openTips:function(t){var i=null;"\u53ec\u5524"==t?i=this.zhaohzs:"\u52a0\u901f"==t?i=this.jiasuzs:"\u63fd\u5ba2"==t?i=this.lankezs:"\u6536\u76ca"==t&&(i=this.shouyizs),i.stopAllActions(),i.active=!0,i.opacity=0,i.runAction(cc.sequence(cc.fadeIn(.3),cc.fadeIn(2),cc.fadeOut(.3),cc.callFunc(function(){i.active=!1})))},update:function(t){if(this.updeGameTime(t),this.mcjdgold>0){var i=Math.ceil(this.sygold*t);i>this.mcjdgold&&(i=this.mcjdgold),this.mcjdgold-=i,r._this.wodejinbi.string=Number(r._this.wodejinbi.string)+i,this.mcjdgold<=0&&(this.sygold=0)}}});e.interact=r,cc._RF.pop()},{"./../currency/music.js":"music","./exsettlement.js":"exsettlement","./game.js":"game","./settlement.js":"settlement",basis:"basis",weixin_ty:"weixin_ty"}],login:[function(t,i,e){"use strict";cc._RF.push(i,"6544aMlZuRMG7on8pDFhIkm","login");var s=t("weixin_ty").wxcur,n=t("basis").basis;cc.Class({extends:cc.Component,properties:{jindut:cc.Node,jindushuliang:cc.Label,langan:cc.Node},onLoad:function(){this.langan.runAction(cc.moveTo(10,cc.v2(-800,-273))),this.loading()},loading:function(){var t=this;if(cc.sys.platform===cc.sys.WECHAT_GAME){var i=wx.getSystemInfoSync(),e=wx.getLaunchOptionsSync();s.webserver="https://short.yishutech.cn/stall/",console.log(e,wx.getStorageSync("openvibration")),n.openvibration=""===wx.getStorageSync("openvibration"),n.openMusic=""===wx.getStorageSync("openMusic"),s.ajax("index").then(function(t){Object.assign(n,t),n.boothLevel1Glod=Number(t.boothLevel1Glod),n.boothLevel2Glod=Number(t.boothLevel2Glod),n.boothLevel3Glod=Number(t.boothLevel3Glod),n.boothLevel4Glod=Number(t.boothLevel4Glod),n.beatEachDropMoney=Number(t.beatEachDropMoney)}),s.wx_login().then(function(t){console.log(t,"login"),n.code=t.code;var e={code:t.code};return"qq"==i.AppPlatform?(console.log("qq"),n.isbanben="qq",s.ajax("qqlogin",e)):(console.log("weixin"),n.isbanben="wx",s.ajax("login",e))}).then(function(t){return console.log(t,"res"),n.openid=t.openid,s.ajax("info",{openid:n.openid})}).then(function(i){t.jindubaifenbi()}).catch(function(t){console.log(t,"err")})}else this.jindubaifenbi();console.log(n)},jindubaifenbi:function(){console.log("\u5f00\u59cb\u52a0\u8f7d"),cc.sys.platform===cc.sys.WECHAT_GAME&&s.ajax("stat",{openid:n.openid,event:"start"}),this.resource=null,cc.director.preloadScene("index",this._progressCallback.bind(this),this._completeCallback.bind(this))},_progressCallback:function(t,i,e){this.progress=t/i,this.jindut.x=-(this.jindut.width-this.jindut.width*this.progress),this.jindushuliang.string=(100*this.progress).toFixed(2)+"%"},_completeCallback:function(t,i){cc.sys.platform===cc.sys.WECHAT_GAME&&s.ajax("stat",{openid:n.openid,event:"inhome"}),t&&console.log(t,"\u8bf7\u6c42\u8d85\u65f6\uff01"),cc.director.loadScene("index")}}),cc._RF.pop()},{basis:"basis",weixin_ty:"weixin_ty"}],map:[function(t,i,e){"use strict";cc._RF.push(i,"3c716btzcBBa70Q3ASDnAqd","map");var s=t("./followerlist.js"),n=t("./game.js"),o=(t("./interact.js"),t("weixin_ty").wxcur),a=t("basis").basis,h=cc.Class({extends:cc.Component,properties:{boothLevel1:cc.Prefab,minMapLoc:cc.Prefab,skils1:cc.Prefab,skils2:cc.Prefab,skils3:cc.Prefab,renwu:cc.Prefab,money:cc.Prefab,minMap:cc.Node,sceneMap:cc.Node},onLoad:function(){h._this=this,this.boothArr=",",this.e=0,this.e2=0,this.e3=0,this.e4=0,this.maxMapX=a.mapWidth/80,this.maxMapY=a.mapHeight/80,this.skils1Pool=o.setNodeBool(10,this.skils1),this.skils2Pool=o.setNodeBool(10,this.skils2),this.skils3Pool=o.setNodeBool(10,this.skils3),this.moneyPool=o.setNodeBool(50,this.money),this.setMap()},rom:function(t,i,e,s,n,o){for(var a=Math.floor(Math.random()*(t-e)),h=Math.floor(Math.random()*(i-s)),c="",r=0;r<e;r++)for(var l=0;l<s;l++){var u=","+(a+r)+"_"+(h+l)+"_";if(this.boothArr.indexOf(u)>=0)return void this.rom(t,i,e,s,n,o);c+=u+"_l"+n+",",r==e-1&&l==s-1&&(this.boothArr+=c,"followe"==o?this.addFollowe(a+r,h+l):"skils1"==o||"skils2"==o||"skils3"==o?this.addSkils(a+r,h+l,o):(this.addBooth(n,a+r,h+l),this.addMinMap(n,a+r,h+l)))}},setMap:function(){this.map=[];for(var t=this.maxMapX,i=this.maxMapY,e=a.booth1,s=a.booth2,n=a.booth3,o=a.booth4,h=0;h<a.aiNum;h++)this.addRenwu(h);for(var c=0;c<o;c++)this.rom(t,i,6,6,4);for(var r=0;r<n;r++)this.rom(t,i,5,4,3);for(var l=0;l<s;l++)this.rom(t,i,4,3,2);for(var u=0;u<e;u++)this.rom(t,i,3,3,1);for(var d=0;d<a.initGuestNum;d++)this.rom(t,i,1,1,"f","followe");for(var m=0;m<a.initSkils1Num;m++)this.rom(t,i,1,1,"s","skils1");for(var g=0;g<a.initSkils2Num;g++)this.rom(t,i,1,1,"s","skils2");for(var p=0;p<a.initSkils3Num;p++)this.rom(t,i,1,1,"s","skils3");for(var f=0;f<i;f++)for(var y=0;y<t;y++)if(!this.map[f]||!this.map[f][y]){!this.map[f]&&(this.map[f]=[]);var v=","+y+"_"+f+"_",b=this.boothArr.indexOf(v),w=this.boothArr;b>=0?(w=w.split(v),this.map[f][y]=w[1][2]):this.map[f][y]=0}console.log(this.map)},addRenwu:function(t){var i=(1*Math.random()-.5)*a.mapWidth,e=(1*Math.random()-.5)*a.mapHeight,n=cc.instantiate(this.minMapLoc);n.x=i*(200/a.mapWidth),n.y=e*(240/a.mapHeight),n.width=6,n.height=6,n.parent=this.minMap,n.color=new cc.Color(139,137,127,255);var o=cc.instantiate(this.renwu),h=o.getComponent("renwu");o.x=i,o.y=e,o.name="ai-"+t,o.parent=s.followerlist._this.followerlist,o.minMapLocColor=n.color,h.xiaodituw=n,o.gameName=a.gameAllName[t];for(var c=0;c<a.aiInitFigure;c++){var r=this.addFollowe(i/80,e/80);r.initChar=!0,h.addMyfollow(r)}},addSkils:function(t,i,e){var n=null;"skils1"==e?((n=o.getNodeBool(this.skils1Pool,this.skils1)).name="\u6280\u80fd-\u63fd\u5ba2\u52a0\u5f3a-"+n._id,n.skilsType=1):"skils2"==e?((n=o.getNodeBool(this.skils2Pool,this.skils2)).name="\u6280\u80fd-\u6536\u76ca\u589e\u5f3a-"+n._id,n.skilsType=2):"skils3"==e&&((n=o.getNodeBool(this.skils3Pool,this.skils3)).name="\u6280\u80fd-\u79fb\u52a8\u52a0\u5f3a-"+n._id,n.skilsType=3),n.mapX=t,n.mapY=i,n.x=80*t-1080,n.y=1280-80*i,n.parent=s.followerlist._this.followerlist},addFollowe:function(t,i){var e=s.followerlist._this.followerPool,n=o.getNodeBool(e,s.followerlist._this.follower);return n.mapX=t,n.mapY=i,n.x=80*t-1080,n.y=1280-80*i,n.name="\u6563-\u5ba2\u4eba\u7269-"+n._id,n.openName=a.gameNameList[Math.floor(a.gameNameList.length*Math.random())],n.parent=s.followerlist._this.followerlist,n},addMinMap:function(t,i,e){var s=cc.instantiate(this.minMapLoc);switch(s.level=t,t){case 1:s.x=80*(i-1)-1080,s.y=1280-80*(e-1),s.width=10,s.height=4;break;case 2:s.x=80*(i-2)-1040,s.y=1280-80*(e-1),s.width=14,s.height=8;break;case 3:s.x=80*(i-3)-1e3,s.y=1240-80*(e-2),s.width=20,s.height=10;break;case 4:s.x=80*(i-4)-960,s.y=1160-80*(e-4),s.width=26,s.height=16}s.mapX=i,s.mapY=e,s.typeNmae="booth",s.x=s.x*(200/a.mapWidth),s.y=s.y*(240/a.mapHeight),s.children[0].width=s.width,s.children[0].height=s.height,s.parent=this.minMap},addBooth:function(t,i,e){var s=cc.instantiate(this.boothLevel1);s.level=t,s.getComponent("booth").init(t,i,e),s.name="\u644a\u4f4d-"+i+"-"+e,s.parent=this.sceneMap},addMoney:function(t,i,e){var s=this,n=o.getNodeBool(this.moneyPool,this.money),h=cc.v2(150*(1*Math.random()-.5),150*(1*Math.random()-.5));n.x=t,n.y=i,n.zIndex=2,n.name="\u949e\u7968-"+n._id,n.parent=this.sceneMap,n.runAction(cc.sequence(cc.moveBy(.2,h),cc.callFunc(function(){n.group="\u94b1"}))),e<=a.beatEachDropMoney?n.money=e:(n.money=a.beatEachDropMoney,e-=a.beatEachDropMoney,setTimeout(function(){s.addMoney(t,i,e)},100))},update:function(t){this.e+=t,this.e2+=t,this.e3+=t,this.e4+=t,this.e>=a.newGuestTime&&n.game._this.gameStart&&(this.e=0,this.rom(this.maxMapX,this.maxMapY,1,1,"f","followe")),this.e2>=a.newSkils1Time&&n.game._this.gameStart&&(this.e2=0,this.rom(this.maxMapX,this.maxMapY,1,1,"s","skils1")),this.e3>=a.newSkils2Time&&n.game._this.gameStart&&(this.e3=0,this.rom(this.maxMapX,this.maxMapY,1,1,"s","skils2")),this.e4>=a.newSkils3Time&&n.game._this.gameStart&&(this.e4=0,this.rom(this.maxMapX,this.maxMapY,1,1,"s","skils3"))}});e.map=h,cc._RF.pop()},{"./followerlist.js":"followerlist","./game.js":"game","./interact.js":"interact",basis:"basis",weixin_ty:"weixin_ty"}],minimaplocat:[function(t,i,e){"use strict";cc._RF.push(i,"92c85DAjbFK77BK5WiVQOLO","minimaplocat");var s=t("./interact.js");cc.Class({extends:cc.Component,properties:{bolan:cc.Node,dwtp:cc.Sprite},onLoad:function(){this.bolan.width=this.node.width,this.bolan.height=this.node.height,this.bolan.runAction(cc.repeatForever(cc.sequence(cc.spawn(cc.scaleTo(.5,2),cc.fadeOut(.5)),cc.scaleTo(0,1),cc.fadeIn(0)))),this.bolan.active=!1,"booth"==this.node.typeNmae&&(this.dwtp.spriteFrame=s.interact._this.gameImgList.getSpriteFrame("\u767d\u8272\u80cc\u666f"))}}),cc._RF.pop()},{"./interact.js":"interact"}],music:[function(t,i,e){"use strict";cc._RF.push(i,"95934TCQfxHWpaNXddEDsvB","music");var s=t("basis").basis,n=cc.Class({extends:cc.Component,properties:{tunshikeren:{default:null,type:cc.AudioClip},baoxiangjl:{default:null,type:cc.AudioClip},dajiaqiangren:{default:null,type:cc.AudioClip},qztwchengg:{default:null,type:cc.AudioClip},dianji:{default:null,type:cc.AudioClip},pochan:{default:null,type:cc.AudioClip},jiesuanjl:{default:null,type:cc.AudioClip},bgm1:{default:null,type:cc.AudioClip},bgm2:{default:null,type:cc.AudioClip},shengli:{default:null,type:cc.AudioClip},rongyaojiangbei:{default:null,type:cc.AudioClip},jinggaosheng:{default:null,type:cc.AudioClip},caifsj:{default:null,type:cc.AudioClip},chaosss:{default:null,type:cc.AudioClip},chaopaosztd:{default:null,type:cc.AudioClip},chaopaofeidong:{default:null,type:cc.AudioClip}},onLoad:function(){n._this=this},Music:function(t){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return cc.audioEngine.playEffect(t,i)},stopMusic:function(t){cc.audioEngine.stopEffect(t)},openMusic:function(t,i){var e=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(s.openMusic)return cc.audioEngine.playEffect(this[i],e)}});e.music=n,cc._RF.pop()},{basis:"basis"}],renwu:[function(t,i,e){"use strict";cc._RF.push(i,"70fb0McYX5I/KPYK33KDaVT","renwu");t("./followerlist");var s=t("./interact.js"),n=t("./map.js"),o=t("./game.js"),a=(t("../currency/music"),t("basis").basis),h=t("weixin_ty").wxcur;cc.Class({extends:cc.Component,properties:{tx:dragonBones.ArmatureDisplay,chupenquan:cc.Node,qipao:cc.Node,qipaowenan:cc.Label,tunshiquan:cc.Node,zskrs:cc.Label,zsquanquan:cc.Node,zsjiantou:cc.Node,lizi:cc.Node,ainame:cc.Label,dingweuquan:cc.Node,xunzhang:cc.Sprite},onLoad:function(){this.e=0,this.e1=0,this.e2=0,this.e3=0,this.e4=0,this.e5=0,this.myfollowerList=[],this.myfollowerList2=[],this.kerenwuList=[],this.occBoothNodeList=[],this.mySkill=[!1,!1],this.baseMovingSpeed=1,this.goldRatio=1,this.gold=0,this.openSkills1Filg=!1,this.openSkills2Filg=!1,this.openSkills3Filg=!1,this.beAttackBooth=null,this.xiaodituw=null,this.death=!1,this.node.invincible=a.gameStartInvTime,this.follLevel=1,this.devourFlag=!1,this.occBooth={people1:0,people2:0,people3:0,people4:0},this.occBoothNum=0,this.lossMonery=0,this.generateBubbleTime=Math.random()*a.generateBubbleTime,this.node.getComponent(cc.CircleCollider).radius=a.devourRadius,this.tunshiquan=this.tunshiquan.getComponent(cc.CircleCollider),this.aiPerList=null,this.resfyd=!0,this.movespeed=a.movespeed,this.romTarget(),this.setFlashing(),this.setTx()},start:function(){if(s.interact._this.goldRnak.push({name:this.node.name,gold:0,gameName:this.node.gameName}),this.ainame.string=this.node.gameName,s.interact._this.goldRnak.length>3&&o.game._this.renwu.updeGold(),"\u6211"==this.node.name)this.xunzhang.spriteFrame=s.interact._this.gameImgList.getSpriteFrame("\u52cb\u7ae0\u7b49\u7ea7"+a.myLevel+"\u5c0f");else{var t=a.myLevel+Math.floor(3*Math.random()-1);t<1?t=1:t>10&&(t=10),this.xunzhang.spriteFrame=s.interact._this.gameImgList.getSpriteFrame("\u52cb\u7ae0\u7b49\u7ea7"+t+"\u5c0f")}},setTx:function(){"\u6211"==this.node.name?(this.imgName=a.myfigure.imgName,this.tx.armatureName=a.myfigure.imgName,this.tx.playAnimation("\u884c\u8d70"),this.node.gameName=a.gameNmae):(this.imgName=o.game._this.aiRomImg[0],o.game._this.aiRomImg.splice(0,1),this.tx.armatureName=this.imgName,this.tx.playAnimation("\u884c\u8d70")),console.log(this.imgName)},updeSpeed:function(){this.movespeed=a.movespeed-a.moveSpeedLevelAttenu*(this.follLevel-1),this.tunshiquan.radius=150+80*(this.follLevel-1),this.tunshiquan.node.width=300+160*(this.follLevel-1),this.tunshiquan.node.height=300+160*(this.follLevel-1),this.zskrs.string=this.myfollowerList.length},updeGold:function(t){var i=this;this.gold=t||(this.occBooth.people1*a.boothLevel1Glod+this.occBooth.people2*a.boothLevel2Glod+this.occBooth.people3*a.boothLevel3Glod+this.occBooth.people4*a.boothLevel4Glod)*this.goldRatio+this.gold,s.interact._this.goldRnak.find(function(t){return t.name==i.node.name}).gold=this.gold,this.updeInter()},updeInter:function(){var t=this;if("\u6211"==this.node.name){var i=s.interact._this.goldRnak.sort(function(t,i){return i.gold-t.gold}).findIndex(function(i){return i.name==t.node.name});this.rnak=i,s.interact._this.btbaiping.string=""+(i+1),s.interact._this.wodejinbi2.string=this.gold,s.interact._this.youxiphmz.children[0].getComponent(cc.Label).string=s.interact._this.goldRnak[0].gameName,s.interact._this.youxiphmz.children[1].getComponent(cc.Label).string=s.interact._this.goldRnak[1].gameName,s.interact._this.youxiphmz.children[2].getComponent(cc.Label).string=s.interact._this.goldRnak[2].gameName,s.interact._this.youxiphjinbi.children[0].getComponent(cc.Label).string=Math.round(s.interact._this.goldRnak[0].gold),s.interact._this.youxiphjinbi.children[1].getComponent(cc.Label).string=Math.round(s.interact._this.goldRnak[1].gold),s.interact._this.youxiphjinbi.children[2].getComponent(cc.Label).string=Math.round(s.interact._this.goldRnak[2].gold),s.interact._this.setGold(this.gold),s.interact._this.gold=this.gold,s.interact._this.rnak=this.rnak+1}},aiMove:function(){if(o.game._this.gameStart&&!this.death){if(this.aiPerList||this.initAiPerList(),Math.abs(Math.floor(this.node.x))>=Math.abs(Math.floor(this.aiTargetX))&&Math.abs(Math.floor(this.node.y))>=Math.abs(Math.floor(this.aiTargetY))&&this.romTarget(),Object.keys(this.aiPerList.zhurenwuList).length>0)this.resfyd=!0,this.beAttackBooth=null,this.combatJudge();else if(this.beAttackBooth)this.aiTargetX=this.beAttackBooth.x,this.aiTargetY=this.beAttackBooth.y;else if(Object.keys(this.aiPerList.moenyList).length>0)this.aiTargetX=Object.values(this.aiPerList.moenyList)[0].x,this.aiTargetY=Object.values(this.aiPerList.moenyList)[0].y;else if(!(Object.keys(this.aiPerList.jnengList).length>0)||this.mySkill[0]&&this.mySkill[1])if(Object.keys(this.aiPerList.kerenwuList).length>0)this.aiTargetX=Object.values(this.aiPerList.kerenwuList)[0].x,this.aiTargetY=Object.values(this.aiPerList.kerenwuList)[0].y;else if(Object.keys(this.aiPerList.tanweiList).length>0&&this.myfollowerList.length>0){Object.values(this.aiPerList.tanweiList)[0].getComponent("booth").zhanlingzhenode.name!=this.node.name&&(this.aiTargetX=Object.values(this.aiPerList.tanweiList)[0].x,this.aiTargetY=Object.values(this.aiPerList.tanweiList)[0].y,this.mubiao="\u644a\u4f4d")}else this.mubiao=null;else this.aiTargetX=Object.values(this.aiPerList.jnengList)[0].x,this.aiTargetY=Object.values(this.aiPerList.jnengList)[0].y;var t=this.aiTargetX,i=this.aiTargetY,e=h.getAngle(this.node.x,this.node.y,t,i);this.node.x,this.node.y==i&&(console.log(111),this.targetTp=null),this.resfyd&&this.yidong(e)}},combatJudge:function(){var t=this,i=void 0;for(var e in this.aiPerList.zhurenwuList)if(s.call(this,this.aiPerList.zhurenwuList[e]),i)return void(this.aiPerList&&setTimeout(function(){delete t.aiPerList.zhurenwuList[e]},0));function s(t){var e=this,s=t.getComponent("renwu");s||console.log(t.name),s.myfollowerList.length==this.myfollowerList.length||0==s.myfollowerList.length?(s.aiPerList&&delete s.aiPerList.zhurenwuList[this.node._id],delete this.aiPerList.zhurenwuList[t._id]):s.myfollowerList.length-this.myfollowerList.length>0&&"\u8dd1"!=this.targetTp?(i=t,this.aiTargetX=-(t.x+1e3),this.aiTargetY=-(t.x+1e3),this.targetTp="\u8dd1",(this.aiTargetX>a.mapWidth/2||this.aiTargetX<-a.mapWidth/2)&&this.romTarget(),(this.aiTargetY>a.mapHeight/2||this.aiTargetY<-a.mapHeight/2)&&this.romTarget(),"\u79fb\u52a8\u52a0\u5f3a"==this.mySkill[0]?this.aiUseSkills(this.mySkill[0],0):"\u79fb\u52a8\u52a0\u5f3a"==this.mySkill[1]&&this.aiUseSkills(this.mySkill[1],1)):s.myfollowerList.length-this.myfollowerList.length<0&&"\u9501\u5b9a"!=this.targetTp&&(this.aiTargetX=t.x+100*Math.random(),this.aiTargetY=t.y+100*Math.random(),"\u79fb\u52a8\u52a0\u5f3a"==this.mySkill[0]?this.aiUseSkills(this.mySkill[0],0):"\u79fb\u52a8\u52a0\u5f3a"==this.mySkill[1]&&this.aiUseSkills(this.mySkill[1],1),setTimeout(function(){e.targetTp=""},200),this.targetTp="\u9501\u5b9a")}},resurrection:function(){var t=this;setTimeout(function(){var i=(1*Math.random()-.5)*a.mapWidth,e=(1*Math.random()-.5)*a.mapHeight;t.node.active=!0,t.death=!1,t.node.x=i,t.node.y=e,t.node.invincible=a.invincibleTime,t.setFlashing()},1e4*a.aiResurrCooling)},romTarget:function(){this.aiTargetX=(Math.random()-.5)*a.mapWidth,this.aiTargetY=(Math.random()-.5)*a.mapHeight},onCollisionEnter:function(t,i){var e=t.node;"\u6211"==this.node.name&&a.observerPattern||e.invincible>0||("\u5ba2\u4eba\u7269"==e.group&&(this.addMyfollow(e),this.myfollowerList2.push(e)),"\u6280\u80fd"==e.group&&this.addSkill(e),"\u94b1"==e.group&&this.getMonery(e))},beDevours:function(t){if(!this.devourFlag){this.devourFlag=!0,this.kerenwuList[this.myfollowerList.length-1]=!1;var i=t.getComponent("renwu"),e=this.myfollowerList[this.myfollowerList.length-1];i.addMyfollow(e),this.initAiPerList(),this.myfollowerList.splice(this.myfollowerList.length-1,1),this.countLayer(this.myfollowerList.length,1),this.updeSpeed()}},countLayer:function(t,i){var e=Math.floor(360/Math.floor(180/(Math.PI/Math.tan(75/(80*(i+.5))))));t>e?(t-=e,i+=1,this.countLayer(t,i)):this.follLevel=i},initAiPerList:function(){this.chupenquan&&(this.aiPerList=this.chupenquan.getComponent("aiperception").initList())},getMonery:function(t){var i=this;t.group="default";var e;e=cc.moveTo(.2,cc.v2(this.node.x,this.node.y)),this.aiPerList&&setTimeout(function(){delete i.aiPerList.moenyList[t._id]},0),t.runAction(cc.sequence(e,cc.callFunc(function(){t.scale=1,t.zIndex=1,i.gold+=t.money,i.updeInter(),n.map._this.moneyPool.put(t)})))},addSkill:function(t){var i=this;if(!this.mySkill[0]||!this.mySkill[1]){var e=this.mySkill[0]?1:0;this.mySkill[e]=t.name.split("-")[1],"\u6211"==this.node.name?(s.interact._this["skill"+(e+1)].getComponent(cc.Sprite).spriteFrame=s.interact._this.gameImgList.getSpriteFrame(this.mySkill[e]),s.interact._this["skill"+(e+1)].name=this.mySkill[e],h.is_WECHAT_GAME()&&a.openvibration&&wx.vibrateShort()):(this.aiUseSkills(this.mySkill[e],e),setTimeout(function(){delete i.aiPerList.jnengList[t._id]},0)),n.map._this["skils"+t.skilsType+"Pool"].put(t)}},addMyfollow:function(t){var i=this,e=this.kerenwuList.findIndex(function(t){return 0==t});e<0&&(e=this.kerenwuList.length),this.kerenwuList[e]=!0;var s=t.getComponent("follower");s.init(e,100,this.node),s.yidong(this.node),this.myfollowerList.splice(e,0,t),"\u6211"!=this.node.name&&setTimeout(function(){delete i.aiPerList.kerenwuList[t._id]},0),this.zskrs.string=this.myfollowerList.length},getMyBooth:function(t){this.occBoothNodeList.push(t)},deleteMyBooth:function(t){var i=this.occBoothNodeList.findIndex(function(i){return i.name==t.name});this.occBoothNodeList.splice(i,1)},zhaohuan:function(){var t=this.node.getChildByName("\u53ec\u5524");t.active=!0,t.runAction(cc.sequence(cc.fadeOut(.5),cc.callFunc(function(){t.opacity=255,t.active=!1})));for(var i=this.occBoothNodeList.length-1;i>=0;i--){var e=this.occBoothNodeList[i],n=this.getDistance(e.x,e.y,this.node.x,this.node.y);if(console.log(n),!(n>a.summonDistance)){var o=e.getComponent("booth"),h=o.boothFollower;o.baitandonghu.active=!1;for(var c=0;c<h.length;c++)this.addMyfollow(h[c].node),this.occBooth["people"+e.level]-=1,h[c].getComponent("follower").summonSpeed=a.summonSpeed;o.zhanlingzhenode="",o.boothFollower=[],o.deleteMinBooth(),this.occBoothNodeList.splice(i,1),"\u6211"==this.node.name&&(this.occBoothNum-=1,s.interact._this.updaHaveBooth(this.occBoothNum),s.interact._this.openTips("\u53ec\u5524"))}}},aiUseSkills:function(t,i){var e=this;"\u79fb\u52a8\u52a0\u5f3a"==t?Math.random()<a.aiSkil3Porbability?(this.mySkill[i]=!1,this.useSkills3()):setTimeout(function(){e.aiUseSkills(t,i)},1e3*a.aiSkilBuiltTime):"\u63fd\u5ba2\u52a0\u5f3a"==t?Math.random()<a.aiSkil1Porbability?(this.mySkill[i]=!1,this.useSkills1()):setTimeout(function(){e.aiUseSkills(t,i)},1e3*a.aiSkilBuiltTime):"\u6536\u76ca\u589e\u5f3a"==t&&(Math.random()<a.aiSkil2Porbability?(this.mySkill[i]=!1,this.useSkills2()):setTimeout(function(){e.aiUseSkills(t,i)},1e3*a.aiSkilBuiltTime))},useSkills:function(t){var i=t.currentTarget,e=i.children[0];"\u6280\u80fd\u69fd1"==i.name?this.mySkill[0]=!1:this.mySkill[1]=!1,"\u79fb\u52a8\u52a0\u5f3a"==e.name?this.useSkills3(i):"\u63fd\u5ba2\u52a0\u5f3a"==e.name?this.useSkills1(i):"\u6536\u76ca\u589e\u5f3a"==e.name&&this.useSkills2(i),"\u6211"==this.node.name&&(e.getComponent(cc.Sprite).spriteFrame="",e.name="")},useSkills1:function(t){var i=this;this.node.getComponent(cc.CircleCollider).radius=a.devourRadius*a.skils1Effect,this.openSkills1Filg=!0,this.e1=0,this.zsquanquan.runAction(cc.sequence(cc.scaleTo(.2,a.skils1Effect),cc.callFunc(function(){i.node.getChildByName("\u5438\u9644").active=!0}))),"\u6211"==this.node.name&&s.interact._this.openTips("\u63fd\u5ba2")},closeSkills1:function(){this.node.getComponent(cc.CircleCollider).radius=a.devourRadius,this.zsquanquan.runAction(cc.scaleTo(.2,1)),this.node.getChildByName("\u5438\u9644").active=!1,this.openSkills1Filg=!1,this.e1=0},useSkills2:function(t){this.goldRatio=a.skils2Effect,this.openSkills2Filg=!0,this.e2=0,this.node.getChildByName("\u6536\u76ca\u589e\u5f3a").active=!0,"\u6211"==this.node.name&&s.interact._this.openTips("\u6536\u76ca")},closeSkills2:function(){this.goldRatio=1,this.openSkills2Filg=!1,this.e2=0,this.node.getChildByName("\u6536\u76ca\u589e\u5f3a").active=!1},useSkills3:function(t){this.baseMovingSpeed=a.skils3Effect,this.openSkills3Filg=!0,this.e3=0,this.node.getChildByName("\u62d6\u5c3e").active=!0,"\u6211"==this.node.name&&s.interact._this.openTips("\u52a0\u901f")},closeSkills3:function(){this.node.getChildByName("\u62d6\u5c3e").active=!1,this.baseMovingSpeed=1,this.openSkills3Filg=!1,this.e3=0},getDistance:function(t,i,e,s){return Math.sqrt(Math.pow(t-e,2)+Math.pow(i-s,2))},yidong:function(t){if(!this.death){var i=this.node;if(!isNaN(t)){var e,s;s=this.y=Math.cos(2*t*Math.PI/360)*this.movespeed*this.baseMovingSpeed,e=this.x=Math.sin(2*t*Math.PI/360)*this.movespeed*this.baseMovingSpeed,i.x+e>a.mapWidth/2||i.x+e<-a.mapWidth/2?i.x=e>0?a.mapWidth/2:-a.mapWidth/2:i.x+=e,i.y+s>a.mapHeight/2||i.y+s<-a.mapHeight/2?i.y=s>0?a.mapHeight/2:-a.mapHeight/2:i.y+=s,this.node.yidongfig=!0,this.xiaodituw.x=i.x*(200/a.mapWidth),this.xiaodituw.y=i.y*(240/a.mapHeight),this.zsjiantou.angle=-t,this.lizi.angle=-t,this.zsjiantou.x=Math.sin(2*t*Math.PI/360)*(this.zsquanquan.width/2-17),this.zsjiantou.y=Math.cos(2*t*Math.PI/360)*(this.zsquanquan.width/2-17),t>180?"\u6211"==this.node.name?this.tx.node.scaleX=-.75:this.tx.node.scaleX=-.5:"\u6211"==this.node.name?this.tx.node.scaleX=.75:this.tx.node.scaleX=.5}}},setFlashing:function(){this.flashing=this.node.runAction(cc.repeatForever(cc.sequence(cc.fadeOut(.5),cc.fadeIn(.5))))},closeFlashing:function(){this.node.stopAction(this.flashing),this.node.opacity=255},openBubble:function(t){var i=this;this.qipaowenan.string=t,this.qipao.active=!0,this.qipao.runAction(cc.sequence(cc.fadeIn(.2),cc.fadeIn(2),cc.fadeOut(.2),cc.callFunc(function(){i.qipao.active=!1})))},yingcang:function(){var t=cc.view.getFrameSize(),i=o.game._this.camera.convertToNodeSpaceAR(cc.v2(this.node.x,this.node.y));i.x+=t.width,i.y+=t.height,i.x>t.width||i.x<-t.width||i.y<-t.height||i.y>t.height?this.node.opacity=0:this.node.opacity=255},update:function(t){if("\u6211"!=this.node.name&&(this.aiMove(),this.yingcang()),o.game._this.gameStart&&(this.node.invincible>0&&("\u6211"==this.node.name&&a.myGameStartInvin||(this.node.invincible-=t,this.node.invincible<=0&&this.closeFlashing())),this.e4+=t,this.e4>=a.boothGolidTimeIniter&&o.game._this.gameStart&&(this.e4=0,this.updeGold()),this.openSkills1Filg&&(this.e1+=t,this.e1>=a.skils1Time&&(this.openSkills1Filg=!1,this.closeSkills1())),this.openSkills2Filg&&(this.e2+=t,this.e2>=a.skils2Time&&(this.openSkills2Filg=!1,this.closeSkills2())),this.openSkills3Filg&&(this.e3+=t,this.e3>=a.skils3Time&&(console.log("\u7ed3\u675f"),this.closeSkills3())),this.devourFlag&&(this.e5+=t,this.e5>=a.devourSpeed&&(this.e5=0,this.devourFlag=!1)),!this.qipao.active&&(this.e+=t,this.e>=this.generateBubbleTime))){this.generateBubbleTime=Math.random()*a.generateBubbleTime,this.e=0;var i=a.basedBubble[Math.floor(Math.random()*a.basedBubble.length)];this.openBubble(i)}}}),cc._RF.pop()},{"../currency/music":"music","./followerlist":"followerlist","./game.js":"game","./interact.js":"interact","./map.js":"map",basis:"basis",weixin_ty:"weixin_ty"}],settlement:[function(t,i,e){"use strict";cc._RF.push(i,"70b3cVVkNhCZZcGYEBQtGd4","settlement");var s=t("./interact.js"),n=(t("weixin_ty").wxcur,t("basis").basis),o=cc.Class({extends:cc.Component,properties:{bcsr:cc.Label,rank:cc.Node,rankItem:cc.Prefab},init:function(t){this.gold=Number(t.money),this.bcsr.string=t.money,n.gold+=this.gold,n.settGold+=this.gold,this.setRank()},setRank:function(){for(var t=0;t<s.interact._this.goldRnak.length;t++){var i=cc.instantiate(this.rankItem),e=i.getComponent("gameRank");i.x=750,i.runAction(cc.sequence(cc.moveBy(.2*(t+1),cc.v2(0,0)),cc.moveBy(.5,cc.v2(-750,0)))),e.init(t),i.parent=this.rank}},doubleGold:function(){n.gold+=this.gold,n.settGold+=this.gold,s.interact._this.openExset()},onLoad:function(){o._this=this}});e.settlement=o,cc._RF.pop()},{"./interact.js":"interact",basis:"basis",weixin_ty:"weixin_ty"}],shop:[function(t,i,e){"use strict";cc._RF.push(i,"59fbaW22KBOdYOJBjiGokY5","shop");var s=t("./index.js"),n=(t("weixin_ty").wxcur,t("basis").basis);cc.Class({extends:cc.Component,properties:{skin:cc.Prefab,myfigure:dragonBones.ArmatureDisplay,figureWords:cc.Label,freeUseBut:cc.Node,figureFun:cc.Label,shopList:cc.Node,funBut1:cc.Node,funBut2:cc.Node,funBut3:cc.Node},onLoad:function(){this.myfigureData=n.myfigure,this.wearSkil=null,this.curSkin=null,this.setMyFigure(),this.addShopFigure()},addShopFigure:function(){for(var t=0;t<n.figureList.length;t++){var i=cc.instantiate(this.skin);i.getComponent("skin").init(n.figureList[t],this),i.figureListIndex=t,i.parent=this.shopList}},confirmSwitchSkin:function(){var t=n.figureList[this.wearSkil.node.figureListIndex],i=n.figureList[this.curSkin.node.figureListIndex];t.use=!1,i.use=!0,this.wearSkil.init(t,this),this.curSkin.init(i,this),n.myfigure=this.curSkin.skinData,n.myfigureIndex=this.curSkin.node.figureListIndex,s.index._this.setrenwu(),this.wearSkil=this.curSkin,this.curSkin=null,this.setMyFigure()},buySkin:function(){var t=n.figureList[this.curSkin.node.figureListIndex];n.gold<t.gold?s.index._this.popup("","goldNotEnoughPopup"):(n.gold-=t.gold,s.index._this.setGold(),t.hava=!0,this.curSkin.init(t,this),this.setMyFigure())},trialSkin:function(){n.myfigure=this.curSkin.skinData,s.index._this.gotoGame()},setMyFigure:function(){this.funBut1.active=!1,this.funBut2.active=!1,this.funBut3.active=!1,this.myfigure.armatureName=this.myfigureData.imgName,this.myfigure.playAnimation("\u884c\u8d70"),this.myfigure.node.height=this.myfigureData.height,this.figureWords.string=this.myfigureData.figureWord,this.figureFun.string="\u89d2\u8272\u79fb\u52a8\u901f\u5ea6+"+100*this.myfigureData.effect+"%",this.myfigureData.hava?(this.freeUseBut.active=!1,this.myfigureData.use||(this.funBut3.active=!0)):(this.freeUseBut.active=!0,"gold"==this.myfigureData.type?this.funBut2.active=!0:this.funBut1.active=!0)},update:function(t){}}),cc._RF.pop()},{"./index.js":"index",basis:"basis",weixin_ty:"weixin_ty"}],skin:[function(t,i,e){"use strict";cc._RF.push(i,"f628dieh+VBFLTmUZRmzYnc","skin");var s=t("./../currency/music.js");t("weixin_ty").wxcur,t("basis").basis;cc.Class({extends:cc.Component,properties:{skin:dragonBones.ArmatureDisplay,typeBut1:cc.Node,typeBut2:cc.Node,typeBut3:cc.Node,typeBut4:cc.Node,gold:cc.Label,bg:cc.Node},init:function(t,i){this.shop=i,this.skinData=t,this.typeBut1.active=!1,this.typeBut2.active=!1,this.typeBut3.active=!1,this.typeBut4.active=!1,this.bg.color=new cc.Color(190,190,190,255),this.skin.armatureName=t.imgName,t.hava?t.use?(this.shop.wearSkil=this,this.typeBut2.active=!0,this.bg.color=new cc.Color(255,255,255,255)):this.typeBut1.active=!0:"gold"==t.type?(this.typeBut3.active=!0,this.gold.string=t.gold):this.typeBut4.active=!0},switchSkin:function(){s.music._this.openMusic("","dianji"),this.shop.myfigureData=this.skinData,this.shop.curSkin=this,this.shop.setMyFigure()}}),cc._RF.pop()},{"./../currency/music.js":"music",basis:"basis",weixin_ty:"weixin_ty"}],weixin_ty:[function(t,i,e){"use strict";cc._RF.push(i,"6684fPnjAdE14SEnHnw42zn","weixin_ty");var s={webserver:"",POPUPFLAG:!0,butshare:{butsharetxt:"",butshareimageUrl:"",butsharequery:"",shareAppType:""},init:function(t){wx.showShareMenu({withShareTicket:!0})},popup:function(t){var i=this,e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(console.log(this.POPUPFLAG),this.POPUPFLAG){if(this.POPUPFLAG=!1,t.active=!t.active,e){var s=t.parent.getChildByName("bg");s.active=!s.active}t.active||(this.POPUPFLAG=!0);var n=t.scale;t.active&&(t.scale=0,t.runAction(cc.sequence(cc.scaleTo(.2,n),cc.callFunc(function(){i.POPUPFLAG=!0}))))}},deepCopy:function(t){var i=Object.prototype.toString.call(t);if("[object Array]"==i){for(var e=[],s=0;s<t.length;s++)e.push(this.deepCopy(t[s]));return e}if("[object Object]"==i){var n={};for(var o in t)n[o]=this.deepCopy(t[o]);return n}return t},ajax:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{"content-type":"application/json"},n=this;return new Promise(function(o,a){wx.request({url:n.webserver+t,data:i,method:e,header:s,success:function(t){o(t.data)},fail:function(t){a(t)}})})},author:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{left:0,top:0,width:wx.getSystemInfoSync().windowWidth,height:wx.getSystemInfoSync().windowHeight},i=this;return new Promise(function(e,s){wx.getSetting({success:function(n){if(console.log(n),n.authSetting["scope.userInfo"])e(n);else{i.button&&i.button.hide();var o=i.button=wx.createUserInfoButton({type:"text",text:"",style:{left:t.left,top:t.top,width:t.width,height:t.height}});o.onTap(function(t){console.log(t),"getUserInfo:ok"==t.errMsg?e(t):s(t),o.hide()})}}})})},wx_login:function(){return new Promise(function(t,i){wx.login({success:function(i){t(i)},fail:function(t){i(t)}})})},share:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.butshare;wx.shareAppMessage({title:t.butsharetxt,imageUrl:t.butshareimageUrl,query:t.butsharequery,shareAppType:t.shareAppType,success:t.success?t.success:function(){},fail:t.fail?t.fail:function(){}})},shareQQZone:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.butshare;wx.shareAppMessage({title:t.butsharetxt,imageUrl:t.butshareimageUrl,query:t.butsharequery,shareAppType:"qzone",success:t.success?t.success:function(){},fail:t.fail?t.fail:function(){}})},righttopshare:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.butshare;return{title:t.butsharetxt,imageUrl:t.butshareimageUrl,query:t.butsharequery}},getwxurl:function(t){return new Promise(function(i,e){cc.loader.load(t+"?aaa=aa.jpg",function(t,s){if(t)return console.log(t,"err"),void e(t);i(s)})})},getByteLen:function(t){for(var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,e=0,s="",n=0;n<t.length;n++){if(e>=i)return s+"...";var o=t.charAt(n);null!=o.match(/[^\x00-\xff]/gi)?e+=2:e+=1,s+=o}return s},getByteLength:function(t){for(var i=0,e=0;e<t.length;e++){null!=t.charAt(e).match(/[^\x00-\xff]/gi)?i+=2:i+=1}return i},getAngle:function(t,i,e,s){var n=Math.abs(t-e),o=Math.abs(i-s),a=o/Math.sqrt(Math.pow(n,2)+Math.pow(o,2)),h=Math.acos(a),c=Math.floor(180/(Math.PI/h));return e>t&&s<i&&(c=180-c),e==t&&s<i&&(c=180),e==t&&s>i&&(c=360),e>t&&s==i&&(c=90),e<t&&s<i&&(c=180+c),e<t&&s==i&&(c=270),e<t&&s>i&&(c=360-c),c},digitalConversion:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return t=(t=Number(t))<1e3?t.toFixed(0):t<1e6?(t/1e3).toFixed(i)+"K":t<1e9?(t/1e6).toFixed(i)+"M":t<1e12?(t/1e9).toFixed(i)+"B":t<1e15?(t/1e12).toFixed(i)+"T":t<1e18?(t/1e15).toFixed(i)+"P":t<1e21?(t/1e18).toFixed(i)+"E":t<1e24?(t/1e21).toFixed(i)+"Z":t<1e27?(t/1e24).toFixed(i)+"Y":(t/1e27).toFixed(i)+"S"},setNodeBool:function(t,i){for(var e=new cc.NodePool,s=0;s<t;++s)e.put(cc.instantiate(i));return e},getNodeBool:function(t,i){return t.size()>0?t.get():cc.instantiate(i)},is_WECHAT_GAME:function(){return cc.sys.platform===cc.sys.WECHAT_GAME}};i.exports={wxcur:s},cc._RF.pop()},{}]},{},["basis","music","weixin_ty","aiperception","booth","devourcircle","exsettlement","follower","followerlist","game","gameRank","interact","map","minimaplocat","renwu","settlement","index","shop","skin","login"]);