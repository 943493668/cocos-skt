
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/script/game/follower.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, 'a6fd9i3LIJJKqejKqQIDyRV', 'follower');
// script/game/follower.js

"use strict";

var _game = require("./game.js");

var _map = require("./map.js");

var _interact = require("./interact.js");

var _music = require("../currency/music.js");

var _require = require('weixin_ty'),
    wxcur = _require.wxcur;

var _require2 = require('basis'),
    basis = _require2.basis;

cc.Class({
  "extends": cc.Component,
  properties: {
    tx: dragonBones.ArmatureDisplay,
    jia1: cc.Node
  },
  onLoad: function onLoad() {
    this.diffX = 0;
    this.diffY = 0;
    this.summonSpeed = 1;
    this.tx.node.scaleX = Math.random() - 0.5 > 0 ? 0.3 : -0.3;
    this.tx.armatureName = "npc00" + Math.ceil(Math.random() * 5);
  },
  init: function init(index, follnum, parent) {
    var _this = this;

    var indexX = 0;
    var indexY = 0;
    var layer = 1;
    var layerTheNumber = 8;
    var angle = 0;
    this.parent = parent;
    this.node.group = '跟随客人物';
    this.node.name = "\u8DDF-\u5BA2\u4EBA\u7269-" + this.node._id;

    if (parent.group == '摊位') {
      this.tx.playAnimation('待机');
      this.yidtw(index);
      return;
    }

    if (parent.name == '我') {
      if (wxcur.is_WECHAT_GAME()) {
        if (basis.openvibration) {
          wx.vibrateShort();
        }
      } //music._this.openMusic('', 'tunshikeren');

    }

    this.jia1.active = true;
    this.jia1.opacity = 255;
    this.jia1.runAction(cc.sequence(cc.spawn(cc.moveBy(0.5, cc.v2(0, 20)), cc.fadeOut(0.5)), cc.callFunc(function () {
      _this.jia1.active = false;
    })));
    var parentCom = parent.getComponent('renwu');
    this.theOwnerName = parent.name;

    if (!this.node.initChar) {
      _map.map._this.map[this.node.mapY][this.node.mapX] = 0;

      _map.map._this.boothArrList.push({
        x: this.node.mapX,
        y: this.node.mapY
      });

      _map.map._this.boothArr.split("," + this.node.mapX + "_" + this.node.mapY + "__lf,").join('');
    }

    this.tx.armatureName = parentCom.imgName;
    this.tx.playAnimation('行走');
    this.node.tagIndex = index;
    layerTheNumber = Math.floor(360 / Math.floor(180 / (Math.PI / Math.tan(150 / 2 / (80 * 1.5)))));
    index += 1;
    countLayer(layerTheNumber);

    function countLayer(n) {
      var nlayer = Math.floor(360 / Math.floor(180 / (Math.PI / Math.tan(150 / 2 / (80 * (layer + 0.5))))));
      layerTheNumber = nlayer;

      if (index > nlayer) {
        index -= nlayer;
        layer += 1;
        countLayer(n);
      }
    }

    this.angle = Math.floor(360 / layerTheNumber) * index + 20;
    this.layer = layer;
    parentCom.follLevel = layer;
    parentCom.updeSpeed();
    this.initcoordX = Math.sin(this.angle * 2 * Math.PI / 360) * ((layer + .5) * 80);
    this.initcoordY = Math.cos(this.angle * 2 * Math.PI / 360) * ((layer + .5) * 80);
    this.targetX = this.initcoordX;
    this.targetY = this.initcoordY;
  },
  devourFigure: function devourFigure(node) {
    var _this2 = this;

    console.log(123);
    var nodeCom = node.getComponent('renwu');
    if (nodeCom.death) return;
    nodeCom.death = true;
    node.runAction(cc.sequence(cc.spawn(cc.moveTo(0.5, cc.v2(this.parent.x, this.parent.y)), //cc.rotateBy(0.5, 1080),
    cc.scaleTo(0.5, 0)), cc.callFunc(function () {
      node.scale = 1;
      node.active = false;
      nodeCom.lossMonery = nodeCom.gold;

      _map.map._this.addMoney(node.x, node.y, Math.floor(nodeCom.gold * basis.beatEachDropRate));

      nodeCom.updeGold(nodeCom.gold - Math.floor(nodeCom.gold * basis.beatEachDropRate));

      _interact.interact._this.openJstishi(_this2.parent.gameName + "\u541E\u5E76\u4E86" + node.gameName);

      if (node.name == '我') {
        _interact.interact._this.popup('', 'pochanPopup');
      } else {
        nodeCom.resurrection();
        setTimeout(function () {
          delete nodeCom.aiPerList.zhurenwuList[node._id];
        }, 0);
      }
    })));
  },
  yidtw: function yidtw(index) {
    var parentCom = this.parent.getComponent('booth');
    var width = (this.parent.width / 80 + 1) / 2;
    var height = (this.parent.height / 80 + 1) / 2;

    switch (parentCom.level) {
      case 4:
        if (index == 11) {
          this.initcoordX = 0 - width * 80;
          this.initcoordY = 0 - height % Math.floor(height) * 80;
        }

        if (index == 12) {
          this.initcoordX = 0 + width % Math.floor(width) * 80;
          this.initcoordY = 0 + height * 80;
        }

        if (index == 13) {
          this.initcoordX = 0 + width * 80;
          this.initcoordY = 0 - height % Math.floor(height) * 80;
        }

        if (index == 14) {
          this.initcoordX = 0 + width % Math.floor(width) * 80;
          this.initcoordY = 0 - height * 80;
        }

        if (index == 15) {
          this.initcoordX = 0 - width * 80;
          this.initcoordY = 0 + (height - 1) % 2 * 80;
        }

        if (index == 16) {
          this.initcoordX = 0 + width * 80;
          this.initcoordY = 0 + (height - 1) % 2 * 80;
        }

      case 3:
        if (index == 7) {
          this.initcoordX = 0 - width * 80;
          this.initcoordY = 0 - (height - 1) % 2 * 80;
        }

        if (index == 8) {
          this.initcoordX = 0 - (width - 1) * 80;
          this.initcoordY = 0 + height * 80;
        }

        if (index == 9) {
          this.initcoordX = 0 + width * 80;
          this.initcoordY = 0 - (height - 1) % 2 * 80;
        }

        if (index == 10) {
          this.initcoordX = 0 - (width - 1) * 80;
          this.initcoordY = 0 - height * 80;
        }

      case 2:
        if (index == 5) {
          this.initcoordX = 0 + (width - 1) * 80;
          this.initcoordY = 0 + height * 80;
        }

        if (index == 6) {
          this.initcoordX = 0 + (width - 1) * 80;
          this.initcoordY = 0 - height * 80;
        }

      case 1:
        if (index == 1) {
          this.initcoordX = 0 - width * 80;
          this.initcoordY = 0 + height % Math.floor(height) * 80;
        }

        if (index == 2) {
          this.initcoordX = 0 - width % Math.floor(width) * 80;
          this.initcoordY = 0 + height * 80;
        }

        if (index == 3) {
          this.initcoordX = 0 + width * 80;
          this.initcoordY = 0 + height % Math.floor(height) * 80;
        }

        if (index == 4) {
          this.initcoordX = 0 - width % Math.floor(width) * 80;
          this.initcoordY = 0 - height * 80;
        }

        break;
    }

    this.targetX = this.initcoordX;
    this.targetY = this.initcoordY;
    this.angle = this.initAngle = -wxcur.getAngle(this.targetX, this.targetY, 0, 0);
  },
  yidong: function yidong(me, gq) {
    if (gq === void 0) {
      gq = false;
    }

    var xiebia = Math.pow(Math.pow(this.initcoordX, 2) + Math.pow(this.initcoordY, 2), 0.5);
    this.targetX = me.x + Math.sin(this.angle * 2 * Math.PI / 360) * xiebia;
    this.targetY = me.y + Math.cos(this.angle * 2 * Math.PI / 360) * xiebia;
    this.diffX = this.targetX - this.node.x;
    this.diffY = this.targetY - this.node.y;
  },
  update: function update(e) {
    if (!this.parent) return;

    if (this.parent.yidongfig) {
      this.yidong(this.parent);
    }

    _game.game._this.yingcang(this.node);

    if (this.diffX == 0 && this.diffY == 0) {
      this.summonSpeed = 1;
      return;
    }

    var _ = 0,
        x = _.x,
        y = _.y;
    this.targetAngle = wxcur.getAngle(this.node.x, this.node.y, this.targetX, this.targetY);

    if (this.parent.group == '主人物') {
      var parCom = this.parent.getComponent('renwu');
      this.tx.node.scaleX = parCom.tx.node.scaleX / Math.abs(parCom.tx.node.scaleX) * 0.3;
    } else if (this.parent.group == '摊位') {
      this.node.x > this.parent.x ? this.tx.node.scaleX = -0.3 : this.tx.node.scaleX = 0.3;
    }

    if (this.parent.group == '摊位') {
      y = Math.cos(this.targetAngle * 2 * Math.PI / 360) * basis.movespeed * 1.5 * this.summonSpeed;
      x = Math.sin(this.targetAngle * 2 * Math.PI / 360) * basis.movespeed * 1.5 * this.summonSpeed;
    } else {
      var parent = this.parent.getComponent('renwu'); //parent.baseMovingSpeed = 1

      y = Math.cos(this.targetAngle * 2 * Math.PI / 360) * basis.movespeed * 1.5 * this.summonSpeed * parent.baseMovingSpeed;
      x = Math.sin(this.targetAngle * 2 * Math.PI / 360) * basis.movespeed * 1.5 * this.summonSpeed * parent.baseMovingSpeed;
    }

    if (this.diffX >= 0 && this.diffX - x <= 0 || this.diffX <= 0 && this.diffX - x >= 0) {
      this.node.x += this.diffX;
      this.diffX = 0;
    } else {
      this.node.x += x;
      this.diffX -= x;
    }

    if (this.diffY >= 0 && this.diffY - y <= 0 || this.diffY <= 0 && this.diffY - y >= 0) {
      this.node.y += this.diffY;
      this.diffY = 0;
    } else {
      this.node.y += y;
      this.diffY -= y;
    }

    if (this.node.x + x > basis.mapWidth / 2 || this.node.x + x < -(basis.mapWidth / 2)) {
      this.node.x = x > 0 ? basis.mapWidth / 2 : -(basis.mapWidth / 2);
    }

    if (this.node.y + y > basis.mapHeight / 2 || this.node.y + y < -(basis.mapHeight / 2)) {
      this.node.y = y > 0 ? basis.mapHeight / 2 : -(basis.mapHeight / 2);
    }
  }
});

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0cy9zY3JpcHQvZ2FtZS9mb2xsb3dlci5qcyJdLCJuYW1lcyI6WyJyZXF1aXJlIiwid3hjdXIiLCJiYXNpcyIsImNjIiwiQ2xhc3MiLCJDb21wb25lbnQiLCJwcm9wZXJ0aWVzIiwidHgiLCJkcmFnb25Cb25lcyIsIkFybWF0dXJlRGlzcGxheSIsImppYTEiLCJOb2RlIiwib25Mb2FkIiwiZGlmZlgiLCJkaWZmWSIsInN1bW1vblNwZWVkIiwibm9kZSIsInNjYWxlWCIsIk1hdGgiLCJyYW5kb20iLCJhcm1hdHVyZU5hbWUiLCJjZWlsIiwiaW5pdCIsImluZGV4IiwiZm9sbG51bSIsInBhcmVudCIsImluZGV4WCIsImluZGV4WSIsImxheWVyIiwibGF5ZXJUaGVOdW1iZXIiLCJhbmdsZSIsImdyb3VwIiwibmFtZSIsIl9pZCIsInBsYXlBbmltYXRpb24iLCJ5aWR0dyIsImlzX1dFQ0hBVF9HQU1FIiwib3BlbnZpYnJhdGlvbiIsInd4IiwidmlicmF0ZVNob3J0IiwiYWN0aXZlIiwib3BhY2l0eSIsInJ1bkFjdGlvbiIsInNlcXVlbmNlIiwic3Bhd24iLCJtb3ZlQnkiLCJ2MiIsImZhZGVPdXQiLCJjYWxsRnVuYyIsInBhcmVudENvbSIsImdldENvbXBvbmVudCIsInRoZU93bmVyTmFtZSIsImluaXRDaGFyIiwibWFwIiwiX3RoaXMiLCJtYXBZIiwibWFwWCIsImJvb3RoQXJyTGlzdCIsInB1c2giLCJ4IiwieSIsImJvb3RoQXJyIiwic3BsaXQiLCJqb2luIiwiaW1nTmFtZSIsInRhZ0luZGV4IiwiZmxvb3IiLCJQSSIsInRhbiIsImNvdW50TGF5ZXIiLCJuIiwibmxheWVyIiwiZm9sbExldmVsIiwidXBkZVNwZWVkIiwiaW5pdGNvb3JkWCIsInNpbiIsImluaXRjb29yZFkiLCJjb3MiLCJ0YXJnZXRYIiwidGFyZ2V0WSIsImRldm91ckZpZ3VyZSIsImNvbnNvbGUiLCJsb2ciLCJub2RlQ29tIiwiZGVhdGgiLCJtb3ZlVG8iLCJzY2FsZVRvIiwic2NhbGUiLCJsb3NzTW9uZXJ5IiwiZ29sZCIsImFkZE1vbmV5IiwiYmVhdEVhY2hEcm9wUmF0ZSIsInVwZGVHb2xkIiwiaW50ZXJhY3QiLCJvcGVuSnN0aXNoaSIsImdhbWVOYW1lIiwicG9wdXAiLCJyZXN1cnJlY3Rpb24iLCJzZXRUaW1lb3V0IiwiYWlQZXJMaXN0Iiwiemh1cmVud3VMaXN0Iiwid2lkdGgiLCJoZWlnaHQiLCJsZXZlbCIsImluaXRBbmdsZSIsImdldEFuZ2xlIiwieWlkb25nIiwibWUiLCJncSIsInhpZWJpYSIsInBvdyIsInVwZGF0ZSIsImUiLCJ5aWRvbmdmaWciLCJnYW1lIiwieWluZ2NhbmciLCJ0YXJnZXRBbmdsZSIsInBhckNvbSIsImFicyIsIm1vdmVzcGVlZCIsImJhc2VNb3ZpbmdTcGVlZCIsIm1hcFdpZHRoIiwibWFwSGVpZ2h0Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUdBOztBQUNBOztBQUNBOztBQUNBOztlQU5rQkEsT0FBTyxDQUFDLFdBQUQ7SUFBakJDLGlCQUFBQTs7Z0JBQ1VELE9BQU8sQ0FBQyxPQUFEO0lBQWpCRSxrQkFBQUE7O0FBT1JDLEVBQUUsQ0FBQ0MsS0FBSCxDQUFTO0FBQ0wsYUFBU0QsRUFBRSxDQUFDRSxTQURQO0FBR0xDLEVBQUFBLFVBQVUsRUFBRTtBQUNSQyxJQUFBQSxFQUFFLEVBQUVDLFdBQVcsQ0FBQ0MsZUFEUjtBQUVSQyxJQUFBQSxJQUFJLEVBQUVQLEVBQUUsQ0FBQ1E7QUFGRCxHQUhQO0FBUUxDLEVBQUFBLE1BUkssb0JBUUk7QUFDTCxTQUFLQyxLQUFMLEdBQWEsQ0FBYjtBQUNBLFNBQUtDLEtBQUwsR0FBYSxDQUFiO0FBQ0EsU0FBS0MsV0FBTCxHQUFtQixDQUFuQjtBQUVBLFNBQUtSLEVBQUwsQ0FBUVMsSUFBUixDQUFhQyxNQUFiLEdBQXNCQyxJQUFJLENBQUNDLE1BQUwsS0FBZ0IsR0FBaEIsR0FBc0IsQ0FBdEIsR0FBMEIsR0FBMUIsR0FBZ0MsQ0FBQyxHQUF2RDtBQUNBLFNBQUtaLEVBQUwsQ0FBUWEsWUFB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Y0EsQ0FBZCxHQUFtQnpELEtBQUssQ0FBQ3VILFFBQU4sR0FBaUIsQ0FBcEMsSUFBMEMsS0FBS3pHLElBQUwsQ0FBVTJDLENBQVYsR0FBY0EsQ0FBZCxHQUFrQixFQUFHekQsS0FBSyxDQUFDdUgsUUFBTixHQUFpQixDQUFwQixDQUFoRSxFQUF3RjtBQUNwRixXQUFLekcsSUFBTCxDQUFVMkMsQ0FBVixHQUFjQSxDQUFDLEdBQUcsQ0FBSixHQUFTekQsS0FBSyxDQUFDdUgsUUFBTixHQUFpQixDQUExQixHQUErQixFQUFHdkgsS0FBSyxDQUFDdUgsUUFBTixHQUFpQixDQUFwQixDQUE3QztBQUNIOztBQUVELFFBQUksS0FBS3pHLElBQUwsQ0FBVTRDLENBQVYsR0FBY0EsQ0FBZCxHQUFtQjFELEtBQUssQ0FBQ3dILFNBQU4sR0FBa0IsQ0FBckMsSUFBMkMsS0FBSzFHLElBQUwsQ0FBVTRDLENBQVYsR0FBY0EsQ0FBZCxHQUFrQixFQUFHMUQsS0FBSyxDQUFDd0gsU0FBTixHQUFrQixDQUFyQixDQUFqRSxFQUEwRjtBQUN0RixXQUFLMUcsSUFBTCxDQUFVNEMsQ0FBVixHQUFjQSxDQUFDLEdBQUcsQ0FBSixHQUFTMUQsS0FBSyxDQUFDd0gsU0FBTixHQUFrQixDQUEzQixHQUFnQyxFQUFHeEgsS0FBSyxDQUFDd0gsU0FBTixHQUFrQixDQUFyQixDQUE5QztBQUNIO0FBQ0o7QUFqU0ksQ0FBVCIsInNvdXJjZVJvb3QiOiIvIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgeyB3eGN1ciB9ID0gcmVxdWlyZSgnd2VpeGluX3R5Jyk7XG5jb25zdCB7IGJhc2lzIH0gPSByZXF1aXJlKCdiYXNpcycpO1xuXG5pbXBvcnQgeyBnYW1lIH0gZnJvbSAnLi9nYW1lLmpzJztcbmltcG9ydCB7IG1hcCB9IGZyb20gJy4vbWFwLmpzJztcbmltcG9ydCB7IGludGVyYWN0IH0gZnJvbSAnLi9pbnRlcmFjdC5qcydcbmltcG9ydCB7IG11c2ljIH0gZnJvbSAnLi4vY3VycmVuY3kvbXVzaWMuanMnO1xuXG5jYy5DbGFzcyh7XG4gICAgZXh0ZW5kczogY2MuQ29tcG9uZW50LFxuXG4gICAgcHJvcGVydGllczoge1xuICAgICAgICB0eDogZHJhZ29uQm9uZXMuQXJtYXR1cmVEaXNwbGF5LFxuICAgICAgICBqaWExOiBjYy5Ob2RlXG4gICAgfSxcblxuICAgIG9uTG9hZCgpIHtcbiAgICAgICAgdGhpcy5kaWZmWCA9IDA7XG4gICAgICAgIHRoaXMuZGlmZlkgPSAwO1xuICAgICAgICB0aGlzLnN1bW1vblNwZWVkID0gMTtcblxuICAgICAgICB0aGlzLnR4Lm5vZGUuc2NhbGVYID0gTWF0aC5yYW5kb20oKSAtIDAuNSA+IDAgPyAwLjMgOiAtMC4zO1xuICAgICAgICB0aGlzLnR4LmFybWF0dXJlTmFtZSA9IGBucGMwMCR7TWF0aC5jZWlsKE1hdGgucmFuZG9tKCkgKiA1KX1gO1xuICAgIH0sXG4gICAgaW5pdChpbmRleCwgZm9sbG51bSwgcGFyZW50KSB7XG4gICAgICAgIGxldCBpbmRleFggPSAwO1xuICAgICAgICBsZXQgaW5kZXhZID0gMDtcbiAgICAgICAgbGV0IGxheWVyID0gMTtcbiAgICAgICAgbGV0IGxheWVyVGhlTnVtYmVyID0gODtcbiAgICAgICAgbGV0IGFuZ2xlID0gMDtcblxuICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgdGhpcy5ub2RlLmdyb3VwID0gJ+i3n+maj+WuouS6uueJqSc7XG4gICAgICAgIHRoaXMubm9kZS5uYW1lID0gYOi3ny3lrqLkurrniaktJHt0aGlzLm5vZGUuX2lkfWBcblxuICAgICAgICBpZiAocGFyZW50Lmdyb3VwID09ICfmkYrkvY0nKSB7XG4gICAgICAgICAgICB0aGlzLnR4LnBsYXlBbmltYXRpb24oJ+W+heacuicpO1xuICAgICAgICAgICAgdGhpcy55aWR0dyhpbmRleCk7XG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChwYXJlbnQubmFtZSA9PSAn5oiRJykge1xuICAgICAgICAgICAgaWYgKHd4Y3VyLmlzX1dFQ0hBVF9HQU1FKCkpIHtcbiAgICAgICAgICAgICAgICBpZiAoYmFzaXMub3BlbnZpYnJhdGlvbikge1xuICAgICAgICAgICAgICAgICAgICB3eC52aWJyYXRlU2hvcnQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vbXVzaWMuX3RoaXMub3Blbk11c2ljKCcnLCAndHVuc2hpa2VyZW4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuamlhMS5hY3RpdmUgPSB0cnVlO1xuICAgICAgICB0aGlzLmppYTEub3BhY2l0eSA9IDI1NTtcbiAgICAgICAgdGhpcy5qaWExLnJ1bkFjdGlvbihjYy5zZXF1ZW5jZShcbiAgICAgICAgICAgIGNjLnNwYXduKFxuICAgICAgICAgICAgICAgIGNjLm1vdmVCeSgwLjUsIGNjLnYyKDAsIDIwKSksXG4gICAgICAgICAgICAgICAgY2MuZmFkZU91dCgwLjUpXG4gICAgICAgICAgICApLFxuICAgICAgICAgICAgY2MuY2FsbEZ1bmMoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuamlhMS5hY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICkpXG5cbiAgICAgICAgY29uc3QgcGFyZW50Q29tID0gcGFyZW50LmdldENvbXBvbmVudCgncmVud3UnKTtcblxuICAgICAgICB0aGlzLnRoZU93bmVyTmFtZSA9IHBhcmVudC5uYW1lO1xuXG4gICAgICAgIGlmICghdGhpcy5ub2RlLmluaXRDaGFyKSB7XG4gICAgICAgICAgICBtYXAuX3RoaXMubWFwW3RoaXMubm9kZS5tYXBZXVt0aGlzLm5vZGUubWFwWF0gPSAwO1xuICAgICAgICAgICAgbWFwLl90aGlzLmJvb3RoQXJyTGlzdC5wdXNoKHsgeDogdGhpcy5ub2RlLm1hcFgsIHk6IHRoaXMubm9kZS5tYXBZIH0pO1xuICAgICAgICAgICAgbWFwLl90aGlzLmJvb3RoQXJyLnNwbGl0KGAsJHt0aGlzLm5vZGUubWFwWH1fJHt0aGlzLm5vZGUubWFwWX1fX2xmLGApLmpvaW4oJycpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy50eC5hcm1hdHVyZU5hbWUgPSBwYXJlbnRDb20uaW1nTmFtZTtcbiAgICAgICAgdGhpcy50eC5wbGF5QW5pbWF0aW9uKCfooYzotbAnKTtcblxuICAgICAgICB0aGlzLm5vZGUudGFnSW5kZXggPSBpbmRleDtcblxuICAgICAgICBsYXllclRoZU51bWJlciA9IE1hdGguZmxvb3IoMzYwIC8gTWF0aC5mbG9vcigxODAgLyAoTWF0aC5QSSAvIE1hdGgudGFuKCgxNTAgLyAyKSAvICg4MCAqIDEuNSkpKSkpO1xuXG4gICAgICAgIGluZGV4ICs9IDE7XG4gICAgICAgIGNvdW50TGF5ZXIobGF5ZXJUaGVOdW1iZXIpO1xuXG4gICAgICAgIGZ1bmN0aW9uIGNvdW50TGF5ZXIobikge1xuICAgICAgICAgICAgbGV0IG5sYXllciA9IE1hdGguZmxvb3IoMzYwIC8gTWF0aC5mbG9vcigxODAgLyAoTWF0aC5QSSAvIE1hdGgudGFuKCgxNTAgLyAyKSAvICg4MCAqIChsYXllciArIDAuNSkpKSkpKTtcblxuICAgICAgICAgICAgbGF5ZXJUaGVOdW1iZXIgPSBubGF5ZXI7XG5cbiAgICAgICAgICAgIGlmIChpbmRleCA+IG5sYXllcikge1xuICAgICAgICAgICAgICAgIGluZGV4IC09IG5sYXllcjtcbiAgICAgICAgICAgICAgICBsYXllciArPSAxO1xuICAgICAgICAgICAgICAgIGNvdW50TGF5ZXIobilcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuYW5nbGUgPSBNYXRoLmZsb29yKDM2MCAvIGxheWVyVGhlTnVtYmVyKSAqIGluZGV4ICsgMjA7XG4gICAgICAgIHRoaXMubGF5ZXIgPSBsYXllcjtcblxuICAgICAgICBwYXJlbnRDb20uZm9sbExldmVsID0gbGF5ZXI7XG4gICAgICAgIHBhcmVudENvbS51cGRlU3BlZWQoKTtcblxuICAgICAgICB0aGlzLmluaXRjb29yZFggPSBNYXRoLnNpbih0aGlzLmFuZ2xlICogMiAqIE1hdGguUEkgLyAzNjApICogKChsYXllciArIC41KSAqIDgwKTtcbiAgICAgICAgdGhpcy5pbml0Y29vcmRZID0gTWF0aC5jb3ModGhpcy5hbmdsZSAqIDIgKiBNYXRoLlBJIC8gMzYwKSAqICgobGF5ZXIgKyAuNSkgKiA4MCk7XG5cbiAgICAgICAgdGhpcy50YXJnZXRYID0gdGhpcy5pbml0Y29vcmRYO1xuICAgICAgICB0aGlzLnRhcmdldFkgPSB0aGlzLmluaXRjb29yZFk7XG4gICAgfSxcblxuICAgIGRldm91ckZpZ3VyZShub2RlKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKDEyMylcbiAgICAgICAgY29uc3Qgbm9kZUNvbSA9IG5vZGUuZ2V0Q29tcG9uZW50KCdyZW53dScpO1xuICAgICAgICBpZiAobm9kZUNvbS5kZWF0aCkgcmV0dXJuO1xuICAgICAgICBub2RlQ29tLmRlYXRoID0gdHJ1ZTtcblxuICAgICAgICBub2RlLnJ1bkFjdGlvbihjYy5zZXF1ZW5jZShcbiAgICAgICAgICAgIGNjLnNwYXduKFxuICAgICAgICAgICAgICAgIGNjLm1vdmVUbygwLjUsIGNjLnYyKHRoaXMucGFyZW50LngsIHRoaXMucGFyZW50LnkpKSxcbiAgICAgICAgICAgICAgICAvL2NjLnJvdGF0ZUJ5KDAuNSwgMTA4MCksXG4gICAgICAgICAgICAgICAgY2Muc2NhbGVUbygwLjUsIDApXG4gICAgICAgICAgICApLFxuICAgICAgICAgICAgY2MuY2FsbEZ1bmMoKCkgPT4ge1xuICAgICAgICAgICAgICAgIG5vZGUuc2NhbGUgPSAxO1xuICAgICAgICAgICAgICAgIG5vZGUuYWN0aXZlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgbm9kZUNvbS5sb3NzTW9uZXJ5ID0gbm9kZUNvbS5nb2xkO1xuICAgICAgICAgICAgICAgIG1hcC5fdGhpcy5hZGRNb25leShub2RlLngsIG5vZGUueSwgTWF0aC5mbG9vcihub2RlQ29tLmdvbGQgKiBiYXNpcy5iZWF0RWFjaERyb3BSYXRlKSk7XG4gICAgICAgICAgICAgICAgbm9kZUNvbS51cGRlR29sZChub2RlQ29tLmdvbGQgLSBNYXRoLmZsb29yKG5vZGVDb20uZ29sZCAqIGJhc2lzLmJlYXRFYWNoRHJvcFJhdGUpKTtcblxuICAgICAgICAgICAgICAgIGludGVyYWN0Ll90aGlzLm9wZW5Kc3Rpc2hpKGAke3RoaXMucGFyZW50LmdhbWVOYW1lfeWQnuW5tuS6hiR7bm9kZS5nYW1lTmFtZX1gKTtcblxuICAgICAgICAgICAgICAgIGlmIChub2RlLm5hbWUgPT0gJ+aIkScpIHtcbiAgICAgICAgICAgICAgICAgICAgaW50ZXJhY3QuX3RoaXMucG9wdXAoJycsICdwb2NoYW5Qb3B1cCcpO1xuXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbm9kZUNvbS5yZXN1cnJlY3Rpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgbm9kZUNvbS5haVBlckxpc3Quemh1cmVud3VMaXN0W25vZGUuX2lkXTtcbiAgICAgICAgICAgICAgICAgICAgfSwgMClcblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICkpXG4gICAgfSxcblxuICAgIHlpZHR3KGluZGV4KSB7XG4gICAgICAgIGNvbnN0IHBhcmVudENvbSA9IHRoaXMucGFyZW50LmdldENvbXBvbmVudCgnYm9vdGgnKTtcbiAgICAgICAgY29uc3Qgd2lkdGggPSAodGhpcy5wYXJlbnQud2lkdGggLyA4MCArIDEpIC8gMjtcbiAgICAgICAgY29uc3QgaGVpZ2h0ID0gKHRoaXMucGFyZW50LmhlaWdodCAvIDgwICsgMSkgLyAyO1xuICAgICAgICBzd2l0Y2ggKHBhcmVudENvbS5sZXZlbCkge1xuICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgIGlmIChpbmRleCA9PSAxMSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmluaXRjb29yZFggPSAwIC0gd2lkdGggKiA4MDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbml0Y29vcmRZID0gMCAtIChoZWlnaHQgJSBNYXRoLmZsb29yKGhlaWdodCkpICogODA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChpbmRleCA9PSAxMikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmluaXRjb29yZFggPSAwICsgKHdpZHRoICUgTWF0aC5mbG9vcih3aWR0aCkpICogODA7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW5pdGNvb3JkWSA9IDAgKyBoZWlnaHQgKiA4MDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGluZGV4ID09IDEzKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW5pdGNvb3JkWCA9IDAgKyB3aWR0aCAqIDgwO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmluaXRjb29yZFkgPSAwIC0gKGhlaWdodCAlIE1hdGguZmxvb3IoaGVpZ2h0KSkgKiA4MDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGluZGV4ID09IDE0KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW5pdGNvb3JkWCA9IDAgKyAod2lkdGggJSBNYXRoLmZsb29yKHdpZHRoKSkgKiA4MDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbml0Y29vcmRZID0gMCAtIGhlaWdodCAqIDgwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoaW5kZXggPT0gMTUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbml0Y29vcmRYID0gMCAtIHdpZHRoICogODA7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW5pdGNvb3JkWSA9IDAgKyAoaGVpZ2h0IC0gMSkgJSAyICogODA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChpbmRleCA9PSAxNikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmluaXRjb29yZFggPSAwICsgd2lkdGggKiA4MDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbml0Y29vcmRZID0gMCArIChoZWlnaHQgLSAxKSAlIDIgKiA4MDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgaWYgKGluZGV4ID09IDcpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbml0Y29vcmRYID0gMCAtIHdpZHRoICogODA7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW5pdGNvb3JkWSA9IDAgLSAoaGVpZ2h0IC0gMSkgJSAyICogODA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChpbmRleCA9PSA4KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW5pdGNvb3JkWCA9IDAgLSAod2lkdGggLSAxKSAqIDgwO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmluaXRjb29yZFkgPSAwICsgaGVpZ2h0ICogODA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChpbmRleCA9PSA5KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW5pdGNvb3JkWCA9IDAgKyB3aWR0aCAqIDgwO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmluaXRjb29yZFkgPSAwIC0gKGhlaWdodCAtIDEpICUgMiAqIDgwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoaW5kZXggPT0gMTApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbml0Y29vcmRYID0gMCAtICh3aWR0aCAtIDEpICogODA7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW5pdGNvb3JkWSA9IDAgLSBoZWlnaHQgKiA4MDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgaWYgKGluZGV4ID09IDUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbml0Y29vcmRYID0gMCArICh3aWR0aCAtIDEpICogODA7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW5pdGNvb3JkWSA9IDAgKyBoZWlnaHQgKiA4MDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGluZGV4ID09IDYpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbml0Y29vcmRYID0gMCArICh3aWR0aCAtIDEpICogODA7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW5pdGNvb3JkWSA9IDAgLSBoZWlnaHQgKiA4MDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgaWYgKGluZGV4ID09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbml0Y29vcmRYID0gMCAtIHdpZHRoICogODA7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW5pdGNvb3JkWSA9IDAgKyAoaGVpZ2h0ICUgTWF0aC5mbG9vcihoZWlnaHQpKSAqIDgwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoaW5kZXggPT0gMikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmluaXRjb29yZFggPSAwIC0gKHdpZHRoICUgTWF0aC5mbG9vcih3aWR0aCkpICogODA7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW5pdGNvb3JkWSA9IDAgKyBoZWlnaHQgKiA4MDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGluZGV4ID09IDMpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbml0Y29vcmRYID0gMCArIHdpZHRoICogODA7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW5pdGNvb3JkWSA9IDAgKyAoaGVpZ2h0ICUgTWF0aC5mbG9vcihoZWlnaHQpKSAqIDgwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoaW5kZXggPT0gNCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmluaXRjb29yZFggPSAwIC0gKHdpZHRoICUgTWF0aC5mbG9vcih3aWR0aCkpICogODA7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW5pdGNvb3JkWSA9IDAgLSBoZWlnaHQgKiA4MDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnRhcmdldFggPSB0aGlzLmluaXRjb29yZFg7XG4gICAgICAgIHRoaXMudGFyZ2V0WSA9IHRoaXMuaW5pdGNvb3JkWTtcblxuICAgICAgICB0aGlzLmFuZ2xlID0gdGhpcy5pbml0QW5nbGUgPSAtd3hjdXIuZ2V0QW5nbGUodGhpcy50YXJnZXRYLCB0aGlzLnRhcmdldFksIDAsIDApO1xuXG4gICAgfSxcbiAgICB5aWRvbmcobWUsIGdxID0gZmFsc2UpIHtcbiAgICAgICAgbGV0IHhpZWJpYSA9IE1hdGgucG93KE1hdGgucG93KHRoaXMuaW5pdGNvb3JkWCwgMikgKyBNYXRoLnBvdyh0aGlzLmluaXRjb29yZFksIDIpLCAwLjUpO1xuICAgICAgICB0aGlzLnRhcmdldFggPSBtZS54ICsgKE1hdGguc2luKHRoaXMuYW5nbGUgKiAyICogTWF0aC5QSSAvIDM2MCkgKiB4aWViaWEpO1xuICAgICAgICB0aGlzLnRhcmdldFkgPSBtZS55ICsgKE1hdGguY29zKHRoaXMuYW5nbGUgKiAyICogTWF0aC5QSSAvIDM2MCkgKiB4aWViaWEpO1xuXG5cblxuXG4gICAgICAgIHRoaXMuZGlmZlggPSB0aGlzLnRhcmdldFggLSB0aGlzLm5vZGUueDtcbiAgICAgICAgdGhpcy5kaWZmWSA9IHRoaXMudGFyZ2V0WSAtIHRoaXMubm9kZS55O1xuXG4gICAgfSxcbiAgICB1cGRhdGUoZSkge1xuXG4gICAgICAgIGlmICghdGhpcy5wYXJlbnQpIHJldHVyblxuXG4gICAgICAgIGlmICh0aGlzLnBhcmVudC55aWRvbmdmaWcpIHtcbiAgICAgICAgICAgIHRoaXMueWlkb25nKHRoaXMucGFyZW50KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGdhbWUuX3RoaXMueWluZ2NhbmcodGhpcy5ub2RlKTtcblxuICAgICAgICBpZiAodGhpcy5kaWZmWCA9PSAwICYmIHRoaXMuZGlmZlkgPT0gMCkge1xuICAgICAgICAgICAgdGhpcy5zdW1tb25TcGVlZCA9IDE7XG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuICAgICAgICBsZXQgeyB4LCB5IH0gPSAwO1xuXG4gICAgICAgIHRoaXMudGFyZ2V0QW5nbGUgPSB3eGN1ci5nZXRBbmdsZSh0aGlzLm5vZGUueCwgdGhpcy5ub2RlLnksIHRoaXMudGFyZ2V0WCwgdGhpcy50YXJnZXRZKTtcblxuICAgICAgICBpZiAodGhpcy5wYXJlbnQuZ3JvdXAgPT0gJ+S4u+S6uueJqScpIHtcbiAgICAgICAgICAgIGNvbnN0IHBhckNvbSA9IHRoaXMucGFyZW50LmdldENvbXBvbmVudCgncmVud3UnKTtcbiAgICAgICAgICAgIHRoaXMudHgubm9kZS5zY2FsZVggPSBwYXJDb20udHgubm9kZS5zY2FsZVggLyBNYXRoLmFicyhwYXJDb20udHgubm9kZS5zY2FsZVgpICogMC4zXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5wYXJlbnQuZ3JvdXAgPT0gJ+aRiuS9jScpIHtcbiAgICAgICAgICAgIHRoaXMubm9kZS54ID4gdGhpcy5wYXJlbnQueCA/IHRoaXMudHgubm9kZS5zY2FsZVggPSAtMC4zIDogdGhpcy50eC5ub2RlLnNjYWxlWCA9IDAuM1xuICAgICAgICB9XG5cblxuICAgICAgICBpZiAodGhpcy5wYXJlbnQuZ3JvdXAgPT0gJ+aRiuS9jScpIHtcbiAgICAgICAgICAgIHkgPSBNYXRoLmNvcyh0aGlzLnRhcmdldEFuZ2xlICogMiAqIE1hdGguUEkgLyAzNjApICogYmFzaXMubW92ZXNwZWVkICogMS41ICogdGhpcy5zdW1tb25TcGVlZDtcbiAgICAgICAgICAgIHggPSBNYXRoLnNpbih0aGlzLnRhcmdldEFuZ2xlICogMiAqIE1hdGguUEkgLyAzNjApICogYmFzaXMubW92ZXNwZWVkICogMS41ICogdGhpcy5zdW1tb25TcGVlZDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHBhcmVudCA9IHRoaXMucGFyZW50LmdldENvbXBvbmVudCgncmVud3UnKTtcblxuICAgICAgICAgICAgLy9wYXJlbnQuYmFzZU1vdmluZ1NwZWVkID0gMVxuICAgICAgICAgICAgeSA9IE1hdGguY29zKHRoaXMudGFyZ2V0QW5nbGUgKiAyICogTWF0aC5QSSAvIDM2MCkgKiBiYXNpcy5tb3Zlc3BlZWQgKiAxLjUgKiB0aGlzLnN1bW1vblNwZWVkICogcGFyZW50LmJhc2VNb3ZpbmdTcGVlZDtcbiAgICAgICAgICAgIHggPSBNYXRoLnNpbih0aGlzLnRhcmdldEFuZ2xlICogMiAqIE1hdGguUEkgLyAzNjApICogYmFzaXMubW92ZXNwZWVkICogMS41ICogdGhpcy5zdW1tb25TcGVlZCAqIHBhcmVudC5iYXNlTW92aW5nU3BlZWQ7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoKHRoaXMuZGlmZlggPj0gMCAmJiB0aGlzLmRpZmZYIC0geCA8PSAwKSB8fCAodGhpcy5kaWZmWCA8PSAwICYmIHRoaXMuZGlmZlggLSB4ID49IDApKSB7XG4gICAgICAgICAgICB0aGlzLm5vZGUueCArPSB0aGlzLmRpZmZYO1xuICAgICAgICAgICAgdGhpcy5kaWZmWCA9IDA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLm5vZGUueCArPSB4O1xuICAgICAgICAgICAgdGhpcy5kaWZmWCAtPSB4O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCh0aGlzLmRpZmZZID49IDAgJiYgdGhpcy5kaWZmWSAtIHkgPD0gMCkgfHwgKHRoaXMuZGlmZlkgPD0gMCAmJiB0aGlzLmRpZmZZIC0geSA+PSAwKSkge1xuICAgICAgICAgICAgdGhpcy5ub2RlLnkgKz0gdGhpcy5kaWZmWTtcbiAgICAgICAgICAgIHRoaXMuZGlmZlkgPSAwO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5ub2RlLnkgKz0geTtcbiAgICAgICAgICAgIHRoaXMuZGlmZlkgLT0geTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLm5vZGUueCArIHggPiAoYmFzaXMubWFwV2lkdGggLyAyKSB8fCB0aGlzLm5vZGUueCArIHggPCAtIChiYXNpcy5tYXBXaWR0aCAvIDIpKSB7XG4gICAgICAgICAgICB0aGlzLm5vZGUueCA9IHggPiAwID8gKGJhc2lzLm1hcFdpZHRoIC8gMikgOiAtIChiYXNpcy5tYXBXaWR0aCAvIDIpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMubm9kZS55ICsgeSA+IChiYXNpcy5tYXBIZWlnaHQgLyAyKSB8fCB0aGlzLm5vZGUueSArIHkgPCAtIChiYXNpcy5tYXBIZWlnaHQgLyAyKSkge1xuICAgICAgICAgICAgdGhpcy5ub2RlLnkgPSB5ID4gMCA/IChiYXNpcy5tYXBIZWlnaHQgLyAyKSA6IC0gKGJhc2lzLm1hcEhlaWdodCAvIDIpO1xuICAgICAgICB9XG4gICAgfVxufSk7XG4iXX0=