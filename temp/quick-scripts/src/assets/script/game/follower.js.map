{"version":3,"sources":["assets/script/game/follower.js"],"names":["require","wxcur","basis","cc","Class","Component","properties","tx","dragonBones","ArmatureDisplay","jia1","Node","onLoad","diffX","diffY","summonSpeed","node","scaleX","Math","random","armatureName","ceil","init","index","follnum","parent","indexX","indexY","layer","layerTheNumber","angle","group","name","_id","playAnimation","yidtw","is_WECHAT_GAME","openvibration","wx","vibrateShort","active","opacity","runAction","sequence","spawn","moveBy","v2","fadeOut","callFunc","parentCom","getComponent","theOwnerName","initChar","map","_this","mapY","mapX","boothArrList","push","x","y","boothArr","split","join","imgName","tagIndex","floor","PI","tan","countLayer","n","nlayer","follLevel","updeSpeed","initcoordX","sin","initcoordY","cos","targetX","targetY","devourFigure","console","log","nodeCom","death","moveTo","scaleTo","scale","lossMonery","gold","addMoney","beatEachDropRate","updeGold","interact","openJstishi","gameName","popup","resurrection","setTimeout","aiPerList","zhurenwuList","width","height","level","initAngle","getAngle","yidong","me","gq","xiebia","pow","update","e","yidongfig","game","yingcang","targetAngle","parCom","abs","movespeed","baseMovingSpeed","mapWidth","mapHeight"],"mappings":"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","sourceRoot":"/","sourcesContent":["const { wxcur } = require('weixin_ty');\nconst { basis } = require('basis');\n\nimport { game } from './game.js';\nimport { map } from './map.js';\nimport { interact } from './interact.js'\nimport { music } from '../currency/music.js';\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        tx: dragonBones.ArmatureDisplay,\n        jia1: cc.Node\n    },\n\n    onLoad() {\n        this.diffX = 0;\n        this.diffY = 0;\n        this.summonSpeed = 1;\n\n        this.tx.node.scaleX = Math.random() - 0.5 > 0 ? 0.3 : -0.3;\n        this.tx.armatureName = `npc00${Math.ceil(Math.random() * 5)}`;\n    },\n    init(index, follnum, parent) {\n        let indexX = 0;\n        let indexY = 0;\n        let layer = 1;\n        let layerTheNumber = 8;\n        let angle = 0;\n\n        this.parent = parent;\n        this.node.group = '跟随客人物';\n        this.node.name = `跟-客人物-${this.node._id}`\n\n        if (parent.group == '摊位') {\n            this.tx.playAnimation('待机');\n            this.yidtw(index);\n            return\n        }\n\n        if (parent.name == '我') {\n            if (wxcur.is_WECHAT_GAME()) {\n                if (basis.openvibration) {\n                    wx.vibrateShort();\n                }\n            }\n\n            //music._this.openMusic('', 'tunshikeren');\n        }\n\n        this.jia1.active = true;\n        this.jia1.opacity = 255;\n        this.jia1.runAction(cc.sequence(\n            cc.spawn(\n                cc.moveBy(0.5, cc.v2(0, 20)),\n                cc.fadeOut(0.5)\n            ),\n            cc.callFunc(() => {\n                this.jia1.active = false;\n            })\n        ))\n\n        const parentCom = parent.getComponent('renwu');\n\n        this.theOwnerName = parent.name;\n\n        if (!this.node.initChar) {\n            map._this.map[this.node.mapY][this.node.mapX] = 0;\n            map._this.boothArrList.push({ x: this.node.mapX, y: this.node.mapY });\n            map._this.boothArr.split(`,${this.node.mapX}_${this.node.mapY}__lf,`).join('');\n        }\n\n        this.tx.armatureName = parentCom.imgName;\n        this.tx.playAnimation('行走');\n\n        this.node.tagIndex = index;\n\n        layerTheNumber = Math.floor(360 / Math.floor(180 / (Math.PI / Math.tan((150 / 2) / (80 * 1.5)))));\n\n        index += 1;\n        countLayer(layerTheNumber);\n\n        function countLayer(n) {\n            let nlayer = Math.floor(360 / Math.floor(180 / (Math.PI / Math.tan((150 / 2) / (80 * (layer + 0.5))))));\n\n            layerTheNumber = nlayer;\n\n            if (index > nlayer) {\n                index -= nlayer;\n                layer += 1;\n                countLayer(n)\n            }\n        }\n\n        this.angle = Math.floor(360 / layerTheNumber) * index + 20;\n        this.layer = layer;\n\n        parentCom.follLevel = layer;\n        parentCom.updeSpeed();\n\n        this.initcoordX = Math.sin(this.angle * 2 * Math.PI / 360) * ((layer + .5) * 80);\n        this.initcoordY = Math.cos(this.angle * 2 * Math.PI / 360) * ((layer + .5) * 80);\n\n        this.targetX = this.initcoordX;\n        this.targetY = this.initcoordY;\n    },\n\n    devourFigure(node) {\n        console.log(123)\n        const nodeCom = node.getComponent('renwu');\n        if (nodeCom.death) return;\n        nodeCom.death = true;\n\n        node.runAction(cc.sequence(\n            cc.spawn(\n                cc.moveTo(0.5, cc.v2(this.parent.x, this.parent.y)),\n                //cc.rotateBy(0.5, 1080),\n                cc.scaleTo(0.5, 0)\n            ),\n            cc.callFunc(() => {\n                node.scale = 1;\n                node.active = false;\n                nodeCom.lossMonery = nodeCom.gold;\n                map._this.addMoney(node.x, node.y, Math.floor(nodeCom.gold * basis.beatEachDropRate));\n                nodeCom.updeGold(nodeCom.gold - Math.floor(nodeCom.gold * basis.beatEachDropRate));\n\n                interact._this.openJstishi(`${this.parent.gameName}吞并了${node.gameName}`);\n\n                if (node.name == '我') {\n                    interact._this.popup('', 'pochanPopup');\n\n                } else {\n                    nodeCom.resurrection();\n                    setTimeout(() => {\n                        delete nodeCom.aiPerList.zhurenwuList[node._id];\n                    }, 0)\n\n                }\n            })\n        ))\n    },\n\n    yidtw(index) {\n        const parentCom = this.parent.getComponent('booth');\n        const width = (this.parent.width / 80 + 1) / 2;\n        const height = (this.parent.height / 80 + 1) / 2;\n        switch (parentCom.level) {\n            case 4:\n                if (index == 11) {\n                    this.initcoordX = 0 - width * 80;\n                    this.initcoordY = 0 - (height % Math.floor(height)) * 80;\n                }\n                if (index == 12) {\n                    this.initcoordX = 0 + (width % Math.floor(width)) * 80;\n                    this.initcoordY = 0 + height * 80;\n                }\n                if (index == 13) {\n                    this.initcoordX = 0 + width * 80;\n                    this.initcoordY = 0 - (height % Math.floor(height)) * 80;\n                }\n                if (index == 14) {\n                    this.initcoordX = 0 + (width % Math.floor(width)) * 80;\n                    this.initcoordY = 0 - height * 80;\n                }\n                if (index == 15) {\n                    this.initcoordX = 0 - width * 80;\n                    this.initcoordY = 0 + (height - 1) % 2 * 80;\n                }\n                if (index == 16) {\n                    this.initcoordX = 0 + width * 80;\n                    this.initcoordY = 0 + (height - 1) % 2 * 80;\n                }\n            case 3:\n                if (index == 7) {\n                    this.initcoordX = 0 - width * 80;\n                    this.initcoordY = 0 - (height - 1) % 2 * 80;\n                }\n                if (index == 8) {\n                    this.initcoordX = 0 - (width - 1) * 80;\n                    this.initcoordY = 0 + height * 80;\n                }\n                if (index == 9) {\n                    this.initcoordX = 0 + width * 80;\n                    this.initcoordY = 0 - (height - 1) % 2 * 80;\n                }\n                if (index == 10) {\n                    this.initcoordX = 0 - (width - 1) * 80;\n                    this.initcoordY = 0 - height * 80;\n                }\n            case 2:\n                if (index == 5) {\n                    this.initcoordX = 0 + (width - 1) * 80;\n                    this.initcoordY = 0 + height * 80;\n                }\n                if (index == 6) {\n                    this.initcoordX = 0 + (width - 1) * 80;\n                    this.initcoordY = 0 - height * 80;\n                }\n            case 1:\n                if (index == 1) {\n                    this.initcoordX = 0 - width * 80;\n                    this.initcoordY = 0 + (height % Math.floor(height)) * 80;\n                }\n                if (index == 2) {\n                    this.initcoordX = 0 - (width % Math.floor(width)) * 80;\n                    this.initcoordY = 0 + height * 80;\n                }\n                if (index == 3) {\n                    this.initcoordX = 0 + width * 80;\n                    this.initcoordY = 0 + (height % Math.floor(height)) * 80;\n                }\n                if (index == 4) {\n                    this.initcoordX = 0 - (width % Math.floor(width)) * 80;\n                    this.initcoordY = 0 - height * 80;\n                }\n                break;\n        }\n\n        this.targetX = this.initcoordX;\n        this.targetY = this.initcoordY;\n\n        this.angle = this.initAngle = -wxcur.getAngle(this.targetX, this.targetY, 0, 0);\n\n    },\n    yidong(me, gq = false) {\n        let xiebia = Math.pow(Math.pow(this.initcoordX, 2) + Math.pow(this.initcoordY, 2), 0.5);\n        this.targetX = me.x + (Math.sin(this.angle * 2 * Math.PI / 360) * xiebia);\n        this.targetY = me.y + (Math.cos(this.angle * 2 * Math.PI / 360) * xiebia);\n\n\n\n\n        this.diffX = this.targetX - this.node.x;\n        this.diffY = this.targetY - this.node.y;\n\n    },\n    update(e) {\n\n        if (!this.parent) return\n\n        if (this.parent.yidongfig) {\n            this.yidong(this.parent);\n        }\n\n        game._this.yingcang(this.node);\n\n        if (this.diffX == 0 && this.diffY == 0) {\n            this.summonSpeed = 1;\n            return\n        }\n        let { x, y } = 0;\n\n        this.targetAngle = wxcur.getAngle(this.node.x, this.node.y, this.targetX, this.targetY);\n\n        if (this.parent.group == '主人物') {\n            const parCom = this.parent.getComponent('renwu');\n            this.tx.node.scaleX = parCom.tx.node.scaleX / Math.abs(parCom.tx.node.scaleX) * 0.3\n        } else if (this.parent.group == '摊位') {\n            this.node.x > this.parent.x ? this.tx.node.scaleX = -0.3 : this.tx.node.scaleX = 0.3\n        }\n\n\n        if (this.parent.group == '摊位') {\n            y = Math.cos(this.targetAngle * 2 * Math.PI / 360) * basis.movespeed * 1.5 * this.summonSpeed;\n            x = Math.sin(this.targetAngle * 2 * Math.PI / 360) * basis.movespeed * 1.5 * this.summonSpeed;\n        } else {\n            const parent = this.parent.getComponent('renwu');\n\n            //parent.baseMovingSpeed = 1\n            y = Math.cos(this.targetAngle * 2 * Math.PI / 360) * basis.movespeed * 1.5 * this.summonSpeed * parent.baseMovingSpeed;\n            x = Math.sin(this.targetAngle * 2 * Math.PI / 360) * basis.movespeed * 1.5 * this.summonSpeed * parent.baseMovingSpeed;\n        }\n\n        if ((this.diffX >= 0 && this.diffX - x <= 0) || (this.diffX <= 0 && this.diffX - x >= 0)) {\n            this.node.x += this.diffX;\n            this.diffX = 0;\n        } else {\n            this.node.x += x;\n            this.diffX -= x;\n        }\n\n        if ((this.diffY >= 0 && this.diffY - y <= 0) || (this.diffY <= 0 && this.diffY - y >= 0)) {\n            this.node.y += this.diffY;\n            this.diffY = 0;\n        } else {\n            this.node.y += y;\n            this.diffY -= y;\n        }\n\n        if (this.node.x + x > (basis.mapWidth / 2) || this.node.x + x < - (basis.mapWidth / 2)) {\n            this.node.x = x > 0 ? (basis.mapWidth / 2) : - (basis.mapWidth / 2);\n        }\n\n        if (this.node.y + y > (basis.mapHeight / 2) || this.node.y + y < - (basis.mapHeight / 2)) {\n            this.node.y = y > 0 ? (basis.mapHeight / 2) : - (basis.mapHeight / 2);\n        }\n    }\n});\n"]}