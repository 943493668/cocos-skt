{"version":3,"sources":["assets/script/game/exsettlement.js"],"names":["require","basis","wxcur","exsettlement","cc","Class","Component","properties","duanweimz","Sprite","jdt","ProgressBar","jangbs","Label","guangquan","Node","xunzhangAli","SpriteAtlas","huodexxs","dijiming","onLoad","_this","runAction","repeatForever","rotateBy","updateInt","spriteFrame","getSpriteFrame","myLevel","progress","myExper","upLevelEx","string","init","num","rank","setTimeout","gdjbs","gdjbs2","update","dt","Math","ceil","interact","gotoIndex","exports"],"mappings":"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","sourceRoot":"/","sourcesContent":["const { basis } = require('basis');\nconst { wxcur } = require('weixin_ty');\n\nimport { game } from './game.js';\nimport { interact } from './interact.js'\nimport { music } from './../currency/music.js';\n\nconst exsettlement = cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        duanweimz: cc.Sprite,\n        jdt: cc.ProgressBar,\n        jangbs: cc.Label,\n        guangquan: cc.Node,\n        xunzhangAli: cc.SpriteAtlas,\n        huodexxs: cc.Label,\n        dijiming: cc.Label\n    },\n    onLoad() {\n        exsettlement._this = this;\n\n        this.guangquan.runAction(cc.repeatForever(cc.rotateBy(5, 360)))\n\n        this.updateInt();\n    },\n    updateInt() {\n        this.duanweimz.spriteFrame = this.xunzhangAli.getSpriteFrame(`勋章等级${basis.myLevel}`);\n        this.jdt.progress = basis.myExper / (basis.upLevelEx[basis.myLevel - 1]);\n        this.jangbs.string = `${basis.myExper}/${basis.upLevelEx[basis.myLevel - 1]}`;\n\n    },\n    init(num, rank) {\n        setTimeout(() => {\n            this.gdjbs = num;\n            this.gdjbs2 = num;\n        }, 1000)\n\n        this.huodexxs.string = `x${num}`;\n        this.dijiming.string = `第${rank + 1}名奖励`;\n    },\n    update(dt) {\n        if (this.gdjbs > 0) {\n            let num = Math.ceil(dt * this.gdjbs2);\n            num > this.gdjbs ? num = this.gdjbs : '';\n            this.gdjbs -= num;\n            basis.myExper += num;\n            if (basis.myExper >= basis.upLevelEx[basis.myLevel - 1]) {\n                basis.myLevel += 1;\n            }\n\n            if (this.gdjbs == 0) {\n                setTimeout(() => {\n                    interact._this.gotoIndex();\n                }, 1000)\n            }\n\n            this.updateInt();\n        }\n    }\n});\n\nexports.exsettlement = exsettlement;"]}