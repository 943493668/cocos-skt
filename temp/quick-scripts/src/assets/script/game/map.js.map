{"version":3,"sources":["assets/script/game/map.js"],"names":["require","wxcur","basis","map","cc","Class","Component","properties","boothLevel1","Prefab","minMapLoc","skils1","skils2","skils3","renwu","money","minMap","Node","sceneMap","onLoad","_this","boothArr","boothArrList","e","e2","e3","e4","maxMapX","mapWidth","maxMapY","mapHeight","skils1Pool","setNodeBool","skils2Pool","skils3Pool","moneyPool","setMap","rom","X","Y","width","height","level","type","that","romNum","Math","floor","random","length","rXY","x","y","romX","romY","arr","i","j","romXY","indexOf","splice","addFollowe","addSkils","addBooth","addMinMap","console","log","mapX","mapY","push","booth1","booth2","booth3","booth4","aiNum","addRenwu","index","boothArr2","split","findx","findIndex","res","initGuestNum","initSkils1Num","initSkils2Num","initSkils3Num","instantiate","parent","color","Color","renwuCom","getComponent","name","followerlist","minMapLocColor","xiaodituw","gameName","gameAllName","aiInitFigure","foll","initChar","addMyfollow","node","getNodeBool","_id","skilsType","followerPool","follower","openName","gameNameList","typeNmae","children","init","addMoney","num","v2","zIndex","runAction","sequence","moveBy","callFunc","group","beatEachDropMoney","setTimeout","update","dt","exports"],"mappings":"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","sourceRoot":"/","sourcesContent":["\nconst { wxcur } = require('weixin_ty');\nconst { basis } = require('basis');\n\nimport { followerlist } from './followerlist.js';\nimport { game } from './game.js';\nimport { interact } from './interact.js';\n\nconst map = cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        boothLevel1: cc.Prefab,\n        minMapLoc: cc.Prefab,\n        skils1: cc.Prefab,\n        skils2: cc.Prefab,\n        skils3: cc.Prefab,\n        renwu: cc.Prefab,\n        money: cc.Prefab,\n        minMap: cc.Node,\n        sceneMap: cc.Node\n    },\n\n    onLoad() {\n        map._this = this;\n\n        this.boothArr = ',';\n        this.boothArrList = [];\n        this.e = 0;\n        this.e2 = 0;\n        this.e3 = 0;\n        this.e4 = 0;\n        this.maxMapX = basis.mapWidth / 80;\n        this.maxMapY = basis.mapHeight / 80;\n\n        this.skils1Pool = wxcur.setNodeBool(10, this.skils1);\n        this.skils2Pool = wxcur.setNodeBool(10, this.skils2);\n        this.skils3Pool = wxcur.setNodeBool(10, this.skils3);\n\n        this.moneyPool = wxcur.setNodeBool(50, this.money);\n\n        this.setMap();\n    },\n    rom(X, Y, width, height, level, type) {\n        const that = this;\n\n        const romNum = Math.floor(Math.random() * this.boothArrList.length);\n        const rXY = this.boothArrList[romNum];\n\n        if (rXY.x + width > X || rXY.y + height > Y) {\n            this.rom(X, Y, width, height, level, type);\n            return\n        }\n\n        let romX = rXY.x;\n        let romY = rXY.y;\n        let arr = ''\n\n        for (let i = 0; i < width; i++) {\n            for (let j = 0; j < height; j++) {\n                let romXY = `,${romX + i}_${romY + j}_`;\n                if (this.boothArr.indexOf(romXY) >= 0) {\n                    this.rom(X, Y, width, height, level, type);\n                    return\n                }\n\n\n                arr += `${romXY}_l${level},`;\n\n                if (i == width - 1 && j == height - 1) {\n                    this.boothArrList.splice(romNum, 1);\n                    this.boothArr += arr;\n                    if (type == 'followe') {\n                        that.addFollowe(romX + i, romY + j)\n                        if (this.map.length != 0) {\n                            this.map[romY + j][romX + i] = 'f';\n                        }\n                    } else if (type == 'skils1' || type == 'skils2' || type == 'skils3') {\n                        that.addSkils(romX + i, romY + j, type)\n                        if (this.map.length != 0) {\n                            this.map[romY + j][romX + i] = 's';\n                        }\n                    } else {\n                        that.addBooth(level, romX + i, romY + j)\n                        that.addMinMap(level, romX + i, romY + j)\n                    }\n                }\n            }\n        }\n\n        console.log(this.map,this.boothArrList)\n    },\n    setMap() {\n        this.map = [];\n        const mapX = this.maxMapX;\n        const mapY = this.maxMapY;\n\n        for (let i = 0; i < mapY; i++) {\n            for (let j = 0; j < mapX; j++) {\n                this.boothArrList.push({ x: j, y: i });\n            }\n        }\n\n        let booth1 = basis.booth1;\n        let booth2 = basis.booth2;\n        let booth3 = basis.booth3;\n        let booth4 = basis.booth4;\n\n        for (let i = 0; i < basis.aiNum; i++) {\n            this.addRenwu(i);\n        }\n\n        for (let i = 0; i < booth4; i++) {\n            this.rom(mapX, mapY, 6, 6, 4);\n        }\n\n        for (let i = 0; i < booth3; i++) {\n            this.rom(mapX, mapY, 5, 4, 3);\n        }\n\n        for (let i = 0; i < booth2; i++) {\n            this.rom(mapX, mapY, 4, 3, 2);\n        }\n\n        for (let i = 0; i < booth1; i++) {\n            this.rom(mapX, mapY, 3, 3, 1);\n        }\n        console.log('开启')\n        for (let i = 0; i < mapY; i++) {\n            for (let j = 0; j < mapX; j++) {\n                if (this.map[i] && this.map[i][j]) continue;\n                !this.map[i] ? this.map[i] = [] : '';\n\n                let romXY = `,${j}_${i}_`;\n                const index = this.boothArr.indexOf(romXY);\n                let boothArr2 = this.boothArr;\n\n                if (index >= 0) {\n                    boothArr2 = boothArr2.split(romXY);\n                    const findx = this.boothArrList.findIndex(res => res.x == j && res.y == i);\n                    if (findx >= 0) {\n                        this.boothArrList.splice(findx, 1);\n                    }\n\n                    this.map[i][j] = boothArr2[1][2];\n                } else {\n                    this.map[i][j] = 0;\n                }\n            }\n        }\n\n        for (let i = 0; i < basis.initGuestNum; i++) {\n            this.rom(mapX, mapY, 1, 1, 'f', 'followe');\n        }\n\n        for (let i = 0; i < basis.initSkils1Num; i++) {\n            this.rom(mapX, mapY, 1, 1, 's', 'skils1');\n        }\n\n        for (let i = 0; i < basis.initSkils2Num; i++) {\n            this.rom(mapX, mapY, 1, 1, 's', 'skils2');\n        }\n\n        for (let i = 0; i < basis.initSkils3Num; i++) {\n            this.rom(mapX, mapY, 1, 1, 's', 'skils3');\n        }\n\n        console.log(this.map, this.boothArrList)\n    },\n    addRenwu(i) {\n        const x = (Math.random() * 1 - 0.5) * basis.mapWidth;\n        const y = (Math.random() * 1 - 0.5) * basis.mapHeight;\n\n        const minMapLoc = cc.instantiate(this.minMapLoc);\n        minMapLoc.x = x * (200 / basis.mapWidth);\n        minMapLoc.y = y * (240 / basis.mapHeight);\n        minMapLoc.width = 6;\n        minMapLoc.height = 6;\n        minMapLoc.parent = this.minMap;\n        // if (i / 2 == 0) {\n        //     minMapLoc.color = new cc.Color(0, 255, 0, 255)\n        // } else {\n        //     minMapLoc.color = new cc.Color(255, 0, 255, 255)\n        // }\n        minMapLoc.color = new cc.Color(139, 137, 127, 255)\n        //minMapLoc.color = new cc.Color(176, 134, 35, 255)\n\n\n        const renwu = cc.instantiate(this.renwu);\n        const renwuCom = renwu.getComponent('renwu')\n        renwu.x = x;\n        renwu.y = y;\n        renwu.name = `ai-${i}`\n        renwu.parent = followerlist._this.followerlist;\n        renwu.minMapLocColor = minMapLoc.color\n        renwuCom.xiaodituw = minMapLoc;\n        renwu.gameName = basis.gameAllName[i];\n\n        for (let i = 0; i < basis.aiInitFigure; i++) {\n            const foll = this.addFollowe(x / 80, y / 80);\n            foll.initChar = true;\n            renwuCom.addMyfollow(foll);\n        }\n    },\n    addSkils(i, j, type) {\n        let node = null\n        if (type == 'skils1') {\n            node = wxcur.getNodeBool(this.skils1Pool, this.skils1);\n            node.name = `技能-揽客加强-${node._id}`;\n            node.skilsType = 1;\n        } else if (type == 'skils2') {\n            node = wxcur.getNodeBool(this.skils2Pool, this.skils2);\n            node.name = `技能-收益增强-${node._id}`;\n            node.skilsType = 2;\n        } else if (type == 'skils3') {\n            node = wxcur.getNodeBool(this.skils3Pool, this.skils3);\n            node.name = `技能-移动加强-${node._id}`;\n            node.skilsType = 3;\n        }\n        //node.children[0].getComponent(cc.Label).string = node.name\n        node.mapX = i;\n        node.mapY = j;\n\n        node.x = 80 - 1160 + (i * 80);\n\n        node.y = 80 + 1200 - (j * 80);\n\n        node.parent = followerlist._this.followerlist;\n    },\n    addFollowe(i, j) {\n        const followerPool = followerlist._this.followerPool;\n        const node = wxcur.getNodeBool(followerPool, followerlist._this.follower);\n        node.mapX = i;\n        node.mapY = j;\n        node.x = 80 - 1160 + (i * 80);\n        node.y = 80 + 1200 - (j * 80);\n        node.name = `散-客人物-${node._id}`;\n        node.openName = basis.gameNameList[Math.floor(basis.gameNameList.length * Math.random())];\n        node.parent = followerlist._this.followerlist;\n        return node;\n    },\n    addMinMap(level, i, j) {\n        const node = cc.instantiate(this.minMapLoc);\n        node.level = level;\n        switch (level) {\n            case 1:\n                node.x = 80 - 1160 + ((i - 1) * 80);\n                node.y = 80 + 1200 - ((j - 1) * 80);\n                node.width = 10;\n                node.height = 4;\n                break\n            case 2:\n                node.x = 160 - 1200 + ((i - 2) * 80);\n                node.y = 80 + 1200 - ((j - 1) * 80);\n                node.width = 14;\n                node.height = 8;\n                break\n            case 3:\n                node.x = 240 - 1240 + ((i - 3) * 80);\n                node.y = 160 + 1080 - ((j - 2) * 80);\n                node.width = 20;\n                node.height = 10;\n                break\n            case 4:\n                node.x = 320 - 1280 + ((i - 4) * 80);\n                node.y = 320 + 840 - ((j - 4) * 80);\n                node.width = 26;\n                node.height = 16;\n                break\n        }\n        node.mapX = i;\n        node.mapY = j;\n        node.typeNmae = 'booth';\n        node.x = node.x * (200 / basis.mapWidth);\n        node.y = node.y * (240 / basis.mapHeight);\n\n        node.children[0].width = node.width;\n        node.children[0].height = node.height;\n\n        node.parent = this.minMap\n    },\n    addBooth(level, i, j) {\n        const node = cc.instantiate(this.boothLevel1);\n        node.level = level;\n        node.getComponent('booth').init(level, i, j);\n        node.name = `摊位-${i}-${j}`;\n        node.parent = this.sceneMap\n    },\n    addMoney(x, y, num) {\n        const node = wxcur.getNodeBool(this.moneyPool, this.money);\n        const v2 = cc.v2(\n            (Math.random() * 1 - 0.5) * 150,\n            (Math.random() * 1 - 0.5) * 150\n        )\n        node.x = x;\n        node.y = y;\n        node.zIndex = 2;\n        node.name = `钞票-${node._id}`\n        node.parent = this.sceneMap;\n        \n        node.runAction(cc.sequence(cc.moveBy(0.2, v2), cc.callFunc(() => {\n            node.group = '钱';\n        })))\n\n        if (num <= basis.beatEachDropMoney) {\n            node.money = num;\n        } else {\n            node.money = basis.beatEachDropMoney;\n            num -= basis.beatEachDropMoney;\n            setTimeout(() => {\n                this.addMoney(x, y, num);\n            }, 100)\n        }\n    },\n    update(dt) {\n        this.e += dt;\n        this.e2 += dt;\n        this.e3 += dt;\n        this.e4 += dt;\n\n        // if (this.e >= basis.newGuestTime && game._this.gameStart) {\n        //     this.e = 0;\n        //     this.rom(this.maxMapX, this.maxMapY, 1, 1, 'f', 'followe');\n        // }\n        // if (this.e2 >= basis.newSkils1Time && game._this.gameStart) {\n        //     this.e2 = 0;\n        //     this.rom(this.maxMapX, this.maxMapY, 1, 1, 's', 'skils1');\n        // }\n        // if (this.e3 >= basis.newSkils2Time && game._this.gameStart) {\n        //     this.e3 = 0;\n        //     this.rom(this.maxMapX, this.maxMapY, 1, 1, 's', 'skils2');\n        // }\n        // if (this.e4 >= basis.newSkils3Time && game._this.gameStart) {\n        //     this.e4 = 0;\n        //     this.rom(this.maxMapX, this.maxMapY, 1, 1, 's', 'skils3');\n        // }\n    }\n});\n\nexports.map = map;"]}