{"version":3,"sources":["assets/script/game/settlement.js"],"names":["require","wxcur","basis","settlement","cc","Class","Component","properties","bcsr","Label","rank","Node","rankItem","Prefab","init","data","gold","Number","money","string","settGold","setRank","i","interact","_this","goldRnak","length","node","instantiate","nodeCom","getComponent","x","runAction","sequence","moveBy","v2","parent","doubleGold","openExset","onLoad","exports"],"mappings":";;;;;;AAIA;;eAHkBA,OAAO,CAAC,WAAD;IAAjBC,iBAAAA;;gBACUD,OAAO,CAAC,OAAD;IAAjBE,kBAAAA;;AAIR,IAAMC,UAAU,GAAGC,EAAE,CAACC,KAAH,CAAS;AACxB,aAASD,EAAE,CAACE,SADY;AAGxBC,EAAAA,UAAU,EAAE;AACRC,IAAAA,IAAI,EAAEJ,EAAE,CAACK,KADD;AAERC,IAAAA,IAAI,EAAEN,EAAE,CAACO,IAFD;AAGRC,IAAAA,QAAQ,EAAER,EAAE,CAACS;AAHL,GAHY;AAQxBC,EAAAA,IARwB,gBAQnBC,IARmB,EAQb;AACP,SAAKC,IAAL,GAAYC,MAAM,CAACF,IAAI,CAACG,KAAN,CAAlB;AAEA,SAAKV,IAAL,CAAUW,MAAV,GAAmBJ,IAAI,CAACG,KAAxB;AAEAhB,IAAAA,KAAK,CAACc,IAAN,IAAc,KAAKA,IAAnB;AAEAd,IAAAA,KAAK,CAACkB,QAAN,IAAkB,KAAKJ,IAAvB;AAEA,SAAKK,OAAL;AACH,GAlBuB;AAmBxBA,EAAAA,OAnBwB,qBAmBd;AACN,SAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGC,mBAASC,KAAT,CAAeC,QAAf,CAAwBC,MAA5C,EAAoDJ,CAAC,EAArD,EAAyD;AACrD,UAAMK,IAAI,GAAGvB,EAAE,CAACwB,WAAH,CAAe,KAAKhB,QAApB,CAAb;AACA,UAAMiB,OAAO,GAAGF,IAAI,CAACG,YAAL,CAAkB,UAAlB,CAAhB;AACAH,MAAAA,IAAI,CAACI,CAAL,GAAS,GAAT;AACAJ,MAAAA,IAAI,CAACK,SAAL,CACI5B,EAAE,CAAC6B,QAAH,CACI7B,EAAE,CAAC8B,MAAH,CAAU,OAAOZ,CAAC,GAAG,CAAX,CAAV,EAAyBlB,EAAE,CAAC+B,EAAH,CAAM,CAAN,EAAS,CAAT,CAAzB,CADJ,EAEI/B,EAAE,CAAC8B,MAAH,CAAU,GAAV,EAAe9B,EAAE,CAAC+B,EAAH,CAAM,CAAC,GAAP,EAAY,CAAZ,CAAf,CAFJ,CADJ;AAMAN,MAAAA,OAAO,CAACf,IAAR,CAAaQ,CAAb;AACAK,MAAAA,IAAI,CAACS,MAAL,GAAc,KAAK1B,IAAnB;AACH;AACJ,GAjCuB;AAkCxB2B,EAAAA,UAlCwB,wBAkCX;AACTnC,IAAAA,KAAK,CAACc,IAAN,IAAc,KAAKA,IAAnB;AAEAd,IAAAA,KAAK,CAACkB,QAAN,IAAkB,KAAKJ,IAAvB;;AAEAO,uBAASC,KAAT,CAAec,SAAf;AACH,GAxCuB;AAyCxBC,EAAAA,MAzCwB,oBAyCf;AACLpC,IAAAA,UAAU,CAACqB,KAAX,GAAmB,IAAnB;AACH;AA3CuB,CAAT,CAAnB;AA+CAgB,OAAO,CAACrC,UAAR,GAAqBA,UAArB","sourceRoot":"/","sourcesContent":["\nconst { wxcur } = require('weixin_ty');\nconst { basis } = require('basis');\n\nimport { interact } from './interact.js'\n\nconst settlement = cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        bcsr: cc.Label,\n        rank: cc.Node,\n        rankItem: cc.Prefab\n    },\n    init(data) {\n        this.gold = Number(data.money);\n\n        this.bcsr.string = data.money;\n\n        basis.gold += this.gold;\n\n        basis.settGold += this.gold;\n\n        this.setRank()\n    },\n    setRank() {\n        for (let i = 0; i < interact._this.goldRnak.length; i++) {\n            const node = cc.instantiate(this.rankItem);\n            const nodeCom = node.getComponent('gameRank');\n            node.x = 750;\n            node.runAction(\n                cc.sequence(\n                    cc.moveBy(0.2 * (i + 1), cc.v2(0, 0)),\n                    cc.moveBy(0.5, cc.v2(-750, 0))\n                )\n            )\n            nodeCom.init(i);\n            node.parent = this.rank;\n        }\n    },\n    doubleGold() {\n        basis.gold += this.gold;\n\n        basis.settGold += this.gold;\n\n        interact._this.openExset();\n    },\n    onLoad() {\n        settlement._this = this;\n    }\n});\n\n\nexports.settlement = settlement;\n"]}